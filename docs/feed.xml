<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="https://www.rupeshtiwari.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.rupeshtiwari.com/" rel="alternate" type="text/html" /><updated>2022-02-01T22:45:44+00:00</updated><id>https://www.rupeshtiwari.com/feed.xml</id><title type="html">Rupesh Tiwari - Founder of Fullstack Master</title><subtitle>Rupesh is a world renowned Senior Software Architect &amp; Trainer. Expert on Service-Oriented Architecture and Domain-Driven Design &amp; Web Development. Make your next project a success or save a late project.</subtitle><author><name>Rupesh Tiwari</name></author><entry><title type="html">How to improve Reliability in the cloud?</title><link href="https://www.rupeshtiwari.com/how-to-improve-reliability-in-the-cloud/" rel="alternate" type="text/html" title="How to improve Reliability in the cloud?" /><published>2021-12-12T00:00:00+00:00</published><updated>2021-12-12T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/how-to-improve-reliability-in-the-cloud</id><content type="html" xml:base="https://www.rupeshtiwari.com/how-to-improve-reliability-in-the-cloud/">&lt;blockquote&gt;
  &lt;p&gt;Did you get a phone call from your customer saying they want to improve their application reliability while you move their workload to the cloud? If yes then continue reading this article. I will use Microsoft Azure to explain the Reliability concept and its improvement steps. You can certainly do the same in Google Cloud or Amazon AWS.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;what-is-reliability&quot;&gt;What is Reliability?&lt;/h2&gt;

&lt;p&gt;Well reliability is a derived concept. Basically you want your application to be available for your customer. Also you should ask what latency is acceptable for your application. If your application is slower or normal, your application users should not keep retrying to finish any transaction. How should your application fidelity be while your application is slow and not rendering properly. So in order to define reliability of your application you have to answer how much your application should be Available and what is your Latency that you want for your application.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Reliability = Availability + Latency
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So basically reliability is something your Business has to define. You must talk to your customer and understand what kind of business they are running, what problem they want to solve, who are the target users for the application.&lt;/p&gt;

&lt;h2 id=&quot;how-to-increase-reliability&quot;&gt;How to increase Reliability?&lt;/h2&gt;

&lt;p&gt;Reliability of your workload is a shared responsibility between you and your cloud provider. Platform Reliability such as datacenter, network and other hardware infrastructure is your cloud provider responsibility. However, application reliability is customer responsibility.&lt;/p&gt;

&lt;p&gt;In order to increase application reliability you must do below:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Choosing and Configuring correct cloud building blocks.&lt;/li&gt;
  &lt;li&gt;Your application must be cloud aware. Like your code should have Retry logic to make sure that application is handling transient failures which is common in the cloud.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;right-building-blocks-to-increase-reliability&quot;&gt;Right Building Blocks to increase Reliability&lt;/h2&gt;

&lt;p&gt;Make sure you choose the right infrastructure building blocks in the cloud to protect their reliability impacts. You have to isolate the concerns and identify them like below:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Isolated VM failure such as OS, disk HDD(hard disk drive)  issue.&lt;/li&gt;
  &lt;li&gt;Hardware failure such as server rack issues.&lt;/li&gt;
  &lt;li&gt;Entire datacenter failure such as power/network issues.&lt;/li&gt;
  &lt;li&gt;Entire Region failure such as natural disasters.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In order to protect VM disk and OS issues you need to use Premium Storage from Azure Cloud. To protect from hardware failure you must create a VM inside the Availability sets. To protect from entire data center failure you must consider deploying your workload in multiple Availability Zones. Also to protect from natural disasters make sure you deploy your workload in another region as well. So in summary you have to choose correct building blocks as per your requirement to improve reliability.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/NmAPF2RRL9cWnGNk2trA4CDiJYP1T94JKw6eCDdIaiMh6cK-cDmxK5L-kFXm6arB43AGSYdXRrJ9NknkOoNxp6xavK_8DQohHvWjJDwkYWthLHm59aQYzUcNkjcjUSh7sw1cvqQy&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-to-improve-reliability-of-an-existing-workload&quot;&gt;How to Improve Reliability of an Existing Workload?&lt;/h2&gt;

&lt;p&gt;Start backup for your virtual machine, databases that you can enable for existing resources in Azure cloud. However, if your VMs are not in the Availability set then you can not put them in the availability set for existing resources. You have to do workaround and re-build some of them and put them in Availability sets again.&lt;/p&gt;

&lt;p&gt;In order to improve reliability of existing workload you must follow below steps on each use case:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Find Key components for the critical use case (which business is more concern)&lt;/li&gt;
  &lt;li&gt;Failure Mode Analysis for the critical use case&lt;/li&gt;
  &lt;li&gt;Calculate Composite SLA for the critical use case&lt;/li&gt;
  &lt;li&gt;Improve Composite SLA to meet business requirement&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;failure-mode-analysis-technique-for-reliability&quot;&gt;Failure Mode Analysis Technique for Reliability &lt;/h2&gt;

&lt;p&gt;First you should talk to customers to find out which business capability they want to be up for what time. Example the purchase application written as asp.net needs to be up for 99.99 and 4 min per month down time. If business defines this then next you must learn their existing workload design consideration to achieve 99.99 SLA.&lt;/p&gt;

&lt;p&gt;Designing for failure is the philosophy to take while designing applications in the cloud. Exploring what happens if something fails? Take the architecture, look at the portions of the application piece by piece and apply failure mode analysis. Break this down into your solution as a series of key processes. Like in your application, the customer goes and searches for an item to buy.&lt;/p&gt;

&lt;h2 id=&quot;step-1-find-the-key-components-of-the-business-use-case&quot;&gt;Step 1: Find the key components of the business use case&lt;/h2&gt;

&lt;p&gt;So now let’s search what component has to be working to make search possible?&lt;/p&gt;

&lt;p&gt;Fo below architecture example in order to make sure Search is working below components must be up and running&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;AKS with .net application&lt;/li&gt;
  &lt;li&gt;Products service&lt;/li&gt;
  &lt;li&gt;Cosmos DB&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/f4_vi4hkaP9Mm_CegNb3EIdZJi4sdcP6M5V4N4UN3hQx9xv6d2EzAgXgfGsl_Pt2fp2XjeWY8a691sTLYNE46L-XBLkWtaMp8euwTTKE3d-WfPKCQvTTDn8VYk1vFvsZORVVDv4j&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;step-2-failure-mode-analysis&quot;&gt;Step 2: Failure Mode Analysis&lt;/h2&gt;

&lt;p&gt;Try to write down each component failure mode and their effect, impact and chances and work with your customer to learn more. This is a collaborative effort. Solutions Architect and Customer together must do this to come up with correct decisions.  For search use cases you want to check what happens if AKS is unavailable, Website is slow, CosmosDB unavailable for read and update use case.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;AKS&lt;/strong&gt; is unavailable so we have to change the SLA to 99.95% on the API server of Kubernetes which is a controller plane. This is the SKU version we have to upgrade. In the worker plane we have a VM whose SLA is just like regular.  So businesses have to think of their own requirements to opt in if they want to upgrade the SLA or kubernetes.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Web site&lt;/strong&gt; is down, because of fluctuation of load due to holiday session. Probability is unknown. So you must use a monitoring tool setup alert to learn more about this kind of problem. LOAD OVER TIME can be only learnt by monitoring and it’s trends.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Cosmos DB&lt;/strong&gt; can not read or update. Cosmos DB has 99.99% SLA for a single region. Cosmos DB can not be updated so customers can not see the latest catalog, it is also covered by 99.99% SLA out of the box by Azure cloud.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/iu8LobbMlbCm015XHh-IK0LDNnCgnpcy4fci8U2yyfL0CqeXKbllaoobPBFa3aUnRny_HuJevOw2g3W-XlZyuKOn7l4j2ogKzdhFrWhEvco1cz9ALewb8MHlbKStECxoTR3XOLKh&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;step-3-calculate-composite-sla&quot;&gt;Step 3: Calculate Composite SLA&lt;/h2&gt;

&lt;p&gt;AKS SLA is 99.95% and Cosmos DB SLA is 99.99%&lt;/p&gt;

&lt;p&gt;So overall composite SLA of AKS and Cosmos DB is 99.99 x 99.95 = &lt;strong&gt;99.94%&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/GCIAG58M95wm2POxLK8YbpqaPsmb_V-znzAPJ7-hcE_00BWNV3l4WTNCv7IjuHLiERLMkxy0-8nfVEDsdAVf776lQj3I15NdqVRF1k5XiXdBjhu2KCMfO-XVmqoyi7p07swRy3Rq&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;step-4-how-to-increase-composite-sla&quot;&gt;Step 4:  How to increase Composite SLA&lt;/h2&gt;

&lt;p&gt;To increase the composed availability add redundancy to the solution. Let’s make 2 AKS, if one breaks the other will work. You can put them in multiple Azure Region East/South USA. They have to be identical. Deployment of the cluster and the containers would have to be deployed in an automated way to keep them identical. IAC (Infrastructure as Code) should be in a repository and used to deploy your resources. Since AKS is in multiple regions you need DB in both regions. Cosmos DB has a multimaster database you can use in 2 regions so any change you do in one region is synchronized in both regions out of the box.  You have to use Microsoft &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/frontdoor/front-door-overview&quot;&gt;Front Door&lt;/a&gt; to route between multiple regions.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;AKS (Azure Kubernetes Service) with redundant will give you SLA 99.99% per region with multiple region SLA is 99.999975%&lt;/li&gt;
  &lt;li&gt;Front Door SLA is 99.99%&lt;/li&gt;
  &lt;li&gt;Cosmos DB with multiple writable region SLA 99.999%&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Composite SLA&lt;/strong&gt; = 0.99999975 x 0.9999 x 0.99999 = &lt;strong&gt;99.99%&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/FfWkyWrjFJtX4F-lFVnBJWvy-8VmvLHrKxGjbibArAZ6VmeaZQsvTysSbFuG6B4TR8hSsL8AkGLzvo7vhk6gHPlnkQ-ajJH7gSlYKBlvVkjCjSps-HPT62EDogXQrqSyW-kWkSTJ&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-to-know-if-something-is-wrong-in-your-web-app&quot;&gt;How to know if something is wrong in your web app?&lt;/h2&gt;

&lt;p&gt;Create alert rules specify conditions and for actions you can alert humans with sms, or create action groups and execute some azure functions.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/_D_EY_Jkd2qcVom9MCo4xRthm8E0rTF2iOW9ib_kLSMr3s1f1mWaPaFZ66AhVNEObFywS1qApOPG6PtaDwaks3ZJsU-5NJ33jT0j0OJFvF4ucF9cze8Gul6AfTyiigzA0d3g25BA&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;enable-vm-replication-for-improved-reliability&quot;&gt;Enable VM Replication for improved Reliability&lt;/h2&gt;

&lt;p&gt;In addition to backup lots of customers are focused on disaster recovery and making sure the workloads are redundant and not just backed up. Meaning that if we had a planned or unplanned type of outage. Planned means upgrades to different applications, or we are testing our disaster recovery  or may be unplanned like some natural disaster or things of nature. So introduce resilience in the form of  being able to access backups that are in another region and to make those come online as quickly as possible to make sure that we reduce downtime to the extent possible.&lt;/p&gt;

&lt;h2 id=&quot;upgrade-vm-to-premium-disks-to-increase-reliability&quot;&gt;Upgrade VM to Premium Disks to increase Reliability&lt;/h2&gt;

&lt;p&gt;For production workloads, especially Big Data, SQL and other transactional DB upgrades to premium disk instead of standar disk offering. Premium disks also offer bursting capabilities.&lt;/p&gt;

&lt;p&gt;Burst means performance on heavy load.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;On-demand bursting: you pay whenever you have burst. When you have an inconsistent workload.&lt;/li&gt;
  &lt;li&gt;Credit-based bursting:  Harvest or credit yourself with additional bursting capability when you are operating below the maximum thresholds that we have. In this case, you’re able to burn those credits by bursting when you need it without any other cost implications. So you accrue your bursting credits when you are not using them and use it when you need.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;upgrade-vm-to-managed-disks-to-increase-reliability&quot;&gt;Upgrade VM to Managed Disks to increase Reliability&lt;/h2&gt;

&lt;p&gt;Un-Managed Disks where you have to set the size, throughput limit, and add more resources to scale are called unmanaged disks.&lt;/p&gt;

&lt;p&gt;However in Managed Disk you get below processes automated for you by your cloud provider:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Set the size, throughput limit, add more resource to scale handled by azure&lt;/li&gt;
  &lt;li&gt;Abstract the entire management layer of storage&lt;/li&gt;
  &lt;li&gt;Compatible with availability set and availability zones, you get 99.99% availability for production workloads.&lt;/li&gt;
  &lt;li&gt;Resiliency : 3 replicas across multiple hardware devices&lt;/li&gt;
  &lt;li&gt;Granular role based access control&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;how-do-i-know-what-i-dont-know&quot;&gt;How do I know what I don’t Know?&lt;/h2&gt;

&lt;p&gt;You have to have a long term learning process. Just wait for another disaster, unexpected event and learn. The other option is to simulate/force failures and see what happens. Say stop AKS and check if your redundancy is working. Take a more experimental model, introduce real world scenarios and see how our workload works. Game day, setup scenario, one team generating un-predictable load by un-usual way, another team observing, are we seeing alerts are coming, are we seeing redundant machine status.&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;In order to get Reliability increased for your customers workload you must speak with them and understand their critical use case which they care most about. Follow the steps that I suggested in this article to come up with the desired reliability state defined by business by doing failure mode analysis in depth one by one for each important use case. You may have to teach your customer about premium disks for VM and their SLA improvement because of upgrading to premium disk. What is managed and unmanaged disks after migrating to managed disk resilience can be increased since it automatically replicates the disk into 3 multiple hardware devices. Consider replicating virtual machines to protect them from regional outages. Setup Azure Virtual Machine backup for improved reliability and to protect from human error or DB corruptions. Also make sure you set up alerts for your applications to send you email or create zendesk tickets whenever it is down. I hope now you have a good understanding about reliability improvement.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="cloud" /><category term="tutorial" /><category term="beginners" /><category term="azure" /><summary type="html">Did you get a phone call from your customer saying they want to improve their application reliability while you move their workload to the cloud? If yes then continue reading this article. I will use Microsoft Azure to explain the Reliability concept and its improvement steps. You can certainly do the same in Google Cloud or Amazon AWS.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/8axKkdp.png" /><media:content medium="image" url="https://i.imgur.com/8axKkdp.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Cloud Security Defense In-Depth Azure Approach</title><link href="https://www.rupeshtiwari.com/cloud-security-defense-in-depth-azure-approach/" rel="alternate" type="text/html" title="Cloud Security Defense In-Depth Azure Approach" /><published>2021-12-11T00:00:00+00:00</published><updated>2021-12-11T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/cloud-security-defense-in-depth-azure-approach</id><content type="html" xml:base="https://www.rupeshtiwari.com/cloud-security-defense-in-depth-azure-approach/">&lt;blockquote&gt;
  &lt;p&gt;In a traditional data center you create one perimeter, secure them by installing firewall, WAF, SIEMS etc. and have 100% confidence that the data center is secure. However, when you migrate to cloud then your VPC or Virtual Network is not 100% secure you have to not only secure your perimeter however, inside of perimeter you have to take care of security. Since it’s a public cloud you have to be more cautious and make sure whatever workload or source code you are moving to is cloud aware. There are various best practices at each level you have to take care of in order to secure your cloud.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;what-is-defense-in-depth&quot;&gt;What is Defense in-depth? &lt;/h2&gt;

&lt;p&gt;There is a concept of Defense in-depth which makes sure that at each level there is security in-place which makes your cloud data center almost 100% secure. However, it needs continuous awareness, assessments and audits. In this article let’s explore how Azure helps us to secure data centers in the cloud.&lt;/p&gt;

&lt;p&gt;Defense in-depth design of azure services and capabilities to help you secure, manage and monitor your cloud data, infrastructure, compute Azure offers unified security management and advanced threat protection for your cloud, on-premise data centers or both.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/vnX_FyeIYoghC9nnzuhYRmZlfep0AaHXTY0VfyH8mr2zy-JD4PSrFGyqqOSfRUGBn7WciGid8T3nGQm4ZPMdM8Qv5XYkviRwTUJ1vKUIL971w5AyxavBM14DoCiWYTBLrIhG54C1&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;When you want to secure your cloud you should think of securing from the physical layer till your data layer.&lt;/p&gt;

&lt;p&gt;Defense In-depth security layers are as follows:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Physical Security ( within your data-center )&lt;/li&gt;
  &lt;li&gt;Policies and Access / Identity and Access Management&lt;/li&gt;
  &lt;li&gt;Perimeter&lt;/li&gt;
  &lt;li&gt;Networking&lt;/li&gt;
  &lt;li&gt;Virtual Machines/Compute&lt;/li&gt;
  &lt;li&gt;Applications&lt;/li&gt;
  &lt;li&gt;Data&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;microsoft-azure-security-center&quot;&gt;Microsoft Azure Security Center&lt;/h2&gt;

&lt;p&gt;In Microsoft Azure all resources and services are designed to keep Defense in-depth in mind.&lt;/p&gt;

&lt;p&gt;Azure Advisor in Azure helps us to maintain our workload to follow well-architected-framework guidelines by showing overall score. Similarly &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/security-center/defender-for-cloud-introduction&quot;&gt;Azure Security Center&lt;/a&gt; helps us to do defense-in-depth and it shows the all score of your cloud security health.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/ruC9kWhf2WcpDIFBNy6ZpQ5KSDtnxxQbb7y4J0TYTo96YnACCHif8JFRdTReNj9ecwd-JNSmsYCKOZoBtaOa3KObRKrG6ADUVcZMEPYIWXuDXc3DgBywQtTnlSCwCEWL-plV2aNj&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Security center has a lot of practical recommendations and quick fixes to keep our workload protected.&lt;/p&gt;

&lt;p&gt;Azure Security center provides unified visibility, control and adaptive threat protection to the resources. So if you add any new resource they will be automatically under threat protection and detection policies. So they are secured from all network attacks.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/eBAkNh4BM0mJ1f9vV2xSVDYjGY-vbxlEu3XOfTcSS6uijG4hpiTc4dwQ6UVndv6G_Tp_SmhwtzVg70LcsM-5JHki3kQGlgRUYLNrIuLjZ1C_OyswNjzrOOxtxFRA5Jhwx85pk7zR&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Additionally Azure Security Center has &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/security/fundamentals/threat-detection&quot;&gt;Intelligent Threat Detection response&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/RwFiOhDn3NJnVHZ1HKqeMX_k14lo5wfBzT0zqwx7vhDFGB0b3XkIrVbniuGC3K2qN0qJ6nLLz_m_gH5rdu7mKTiGqeJhOAvcmD_ze4CGShDp1uU4u8u4NAXWQqCEJB-VziQ_Dusg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Let’s understand how we would set up defense in-depth in the cloud starting from physical layer security up to data layer security.&lt;/p&gt;

&lt;h2 id=&quot;physical-security&quot;&gt;Physical Security &lt;/h2&gt;

&lt;p&gt;For physical security of cloud Infrastructure cloud providers are responsible. Therefore as a customer we should not be worried about securing physical data centers, racks, wire etc. Azure data center security is at high top priority. Cloud providers like Azure or AWS or Google Cloud are responsible for “Security of the Cloud” - Azure is responsible for protecting the infrastructure that runs all of the services offered in the Azure Cloud. This infrastructure is composed of the hardware, software, networking, and facilities that run Azure Cloud services.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/6x-PZcvjmkvzOCCDTOBMHaY1Hm5vvp0wO-qpFIObr-8gb6RWNZoAb8UaZgif-oP2SRjedOXH7O9o7awgq33aaQCsbbKIZUX080XkBvv1j_0n6VyBSkNwUtVV15jzu6BPlPuVDMvJ&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;policies-and-access&quot;&gt;Policies and Access&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/W0s8GBrFCn3oGBplWL-3CkVdELjemy_kp65eoEk8whNqvQ6wmgll3IoKc4DyPrlt9t5AeKMER9Apn-nXYvwN9kFS6EPqLsPIkU5ZPkiW-YgLQP7oLseB-1TH61ZEY0lYg3_OPUuv&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In Azure everything starts with  Identity and Access. All Azure resources ( Network, Compute, Apps, Data etc.)  are governed by Azure Active Directory. You can also add policies and Role based access control for each individual resource in your cloud.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/zFLkL5WpWCEkrfmcCLg8mOsz2oQO4XZC8MbnpFEy_CxUE4Vg4zZqFpZDnMrShnkDws_ZtafiJIpS6eP6WjZIDjudAaPWbuyDNyEF2Ab3MIsiBjLaq4yxLECQR3fjctDn7Y_7aMVF&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Azure has a separate service to manage security policies and access to resources. Weather accessed by people or programs by REST API calls to your resources. This can control which processes can access your application files or data and granular access is delegated.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/xyukF8A8HBqNsFmjmu6ROYDSy_SJ_2qiJWTWXFmYl9PVo2yxBs8C1HR3pd1Nm1sn5L4Nf30AL8Ul48c-rbR4J-gkXBNJgExzROrnqTIyBf3ncykLwOIJp9BcvEB09993lVa5_KEi&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;These controls are the front door of your environment. Your IT can make developers as contributors, marketing users as readers and so on by applying role based access control (RBAC). Role could be owner, contributor or reader and many other in-built roles are available.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/zwLWOxEd1TKSFbsPziMIAJdbmc3A-I-URI21AjebsNPezKWoCRrWB79ujtZD7UkD4pXFi_S7pIpnF_v6C1Bx5u0l1o5Cg7YiKv0z_L73DWbbTWcYDUydyKuxeFFVvL3wKKzAMyqI&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;perimeter-security&quot;&gt;Perimeter Security&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/srZpu7GCTkioKhComoj0lB1qJ2kp8rqytWL614pZplxDGpCBhHZlfbJzcL1ya5t5JQtGHvapSG8vC4bGK44fpJfwKIierON8ZIMZNh8xmQbWg4-PYi9LQTqU46R_9yGHRjRSSQwl&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Perimeter networks in the cloud enable secure connectivity between your cloud networks and your on-premise or physical datacenter network. Perimeter network is also called a demilitarized zone or DMZ. The number of DDoS (Distributed Denial of Service Attacks) over 100 GB/s in &lt;a href=&quot;https://www.comparitech.com/blog/information-security/ddos-statistics-facts/&quot;&gt;volume increased 776 percent in Q1 2020.&lt;/a&gt; In a DDoS attack, a perpetrator intentionally floods the system, like a server, website, or other network resource, with fake traffic.&lt;/p&gt;

&lt;p&gt;In order to secure your perimeter in the cloud you must set up a Firewall. You may want to also install IPS (Intrusion Prevention Systems) &amp;amp; IDS (Intrusion Detection Systems ) to detect and prevent unwanted traffic and block not requiring ports and IPs.&lt;/p&gt;

&lt;p&gt;Also you must protect your perimeter from Distributed denial of service (DDoS) attacks. Every property in Azure is protected by Azure’s infrastructure DDoS (Basic) Protection at no additional cost.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/HWtudjFgAQZSNr0Y2MhD_vqN5VyqBWJW-gXEeDzHCSW6qop7yKcIyRIxEtQFNMJ7j4_56fOOfUpMKPcUH9BcG9Glq5O00B8LJadQQTySCywK5gZEmae1xl_wtbMTRjiX1AIiPgoc&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/2jPvLCp15Ld7pEJXg-unikeb6NU1I7jfh6dTUGuM3ouohJZIfVDljvrbuhoLSAkHsPt7D7CL4p3zHA6UNtLBt-iXKRV_XBcc-lAgv08Bpx2C6-XrJWm8Vl9WeeX3MlcV-1cdRyq4&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Layer-7 DDoS protection can be achieved by using &lt;a href=&quot;https://azure.microsoft.com/en-us/services/ddos-protection/#documentation&quot;&gt;Azure’s DDoS Protection&lt;/a&gt; for protection against DDoS attacks.&lt;/p&gt;

&lt;p&gt;Azure DDoS protection will save from protocol attack where the attackers tries to find and exploit weaknesses in layer 3 (Network) and 4(Transport) stacks.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/SgItOoTz0lqyUTFmYMGtBPiTPpzvpEggFDTAgEfS0M8rCVARiclWRimVrtCg5uqw7xYtEJDVBvZCO6fhyH7Lb92aYF5Lw2j4EmS9lFAKGI5TuWsAsgrbs5_3J0C_CMAns-NuC2kh&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Application attack where the application packets are used to disrupt transmission of data between hosts like cross-site scripting or HTTP protocol violation attacks.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/-TRCxfIU2zD1YXEYJ7FCUAjnPI2e1Z724VFNLNErsLzGBvE2FRtjShc8WKNUOY2k9tkbRP4m9T3OSM6KhcUI5vMt3pZalD7IemoPmdGIpbepYW-XoSAQFEwnvqQhTCTi5dUW8h4E&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;network-protection&quot;&gt;Network Protection&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/oEyHwqk9JSt51qOeh47jEccKkAzOUgQ__XcK75rH-5qcAjvSUBUWZq2iZYgETe5oAmPH4WfaRJUwQJRu8ocIvsFmvQ1BqrB0sEHuaAjRCQp0a26zBICgb1e9MyDu5c7j_NwTfML6&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Azure Security center will report on potential network and security issues related to open ports and firewall settings and Network Security Groups (NSG). You can enforce logical network boundaries and limit permissions to NSG.&lt;/p&gt;

&lt;p&gt;With enabled network watchers you can quickly go to the my network diagram page and check the diagram for the selected virtual network, select the desired subnet and open/close port or block IP addresses.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/b4ZBLVK9nJ5LQRfRKU8N7T9Jhu2dg_X-HDT4Hx8Q71JhVEqw8zM1pfZ0F-6vLeazZ4-M2PtSahZaezAqjm112TC2dBTtbiHEAUhyrdGO7N5ftgWrV8oeiWtbPOEamkD00v7CvoGK&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If I select the backend subnet and then I can see all of the network security group (NSG) and identify the desired NSG to analyze.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/QPZULg1mwiklJNjBrfkIaGKgl2m8rxJ2z4yOi9mBOa_jAuUGrmBjWLsTriGkWK0dPRTV-LZfRBhCuNR2m58bNXvny4rAxHJmx_i5Ro48g6G466De9QiYkPLcLEwBkxIhtO3xbB20&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Once I get into the NSG page for a desired subnet then I can manually enable/disable ports or range of IP addresses. You can also enable just in time port access for your virtual machine and manage open ports.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/ICawWtuXweQcUm3_8xxqRJ-I-Yb412SFbHSXsAQJaAMSHWI_mJwnaYAT3mnk2e_q13Ts0snemP7lgR8yyerxeUcpya-2NSgmRy4Tg8k6x54AwfbPVVYVXFS9grcA8mPYYPAXsKye&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;With intelligent recommendations to reduce exposure to &lt;a href=&quot;https://en.wikipedia.org/wiki/Brute-force_attack&quot;&gt;brute force attacks&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Additionally, your network in the cloud can be protected by enabling monitoring, encryption and network segmentations.&lt;/p&gt;

&lt;h2 id=&quot;compute-protection&quot;&gt;Compute Protection&lt;/h2&gt;

&lt;p&gt;Compute means your Virtual Machines and such (IaaS) things in the cloud. Azure Security Center will also provide an actionable item list for your virtual machines. Tell you what the patches are pending with their severity using machine learning.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/7-QWjkor6rRvSqmvztq3MC8gQv5zRL1jOBCVL6a2qQVLupdkkorETOSYM9FAnKa0nsDDlVZK2gx2mu6AhZHsaJVfUyjVxw0JzHWyW3xEayD-2V0MagNj8ws_BPj576AZxAV1ydkV&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You should set up NSG on the Virtual machine NIC (Network Interface Card ) and secure it by disabling port or IP addresses if required. So that it will keep unwanted traffic out of the host.&lt;/p&gt;

&lt;p&gt;Make sure you have installed proper antivirus in the Virtual Machines. &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/iaas-antimalware-windows&quot;&gt;Microsoft Antimalware for Azure&lt;/a&gt; is free real-time protection capability that helps identify and remove viruses, spyware, and other malicious software, with configurable alerts when known malicious or unwanted software attempts to install itself or run on your Azure systems.&lt;/p&gt;

&lt;p&gt;Single SignOn is another feature that prevents users from entering passwords and protects us from various security attacks. Use Azure Active Directory authentication and Managed identity that includes System or User Defined Identities to auto authenticate other processes trying to access your virtual machines.&lt;/p&gt;

&lt;p&gt;Virtual Patching is another workaround that we should use to protect existing legacy applications installed on cloud virtual machines. Legacy applications are not cloud ready and they have various vulnerabilities. Most of the time we do not have permission/bandwidth/budget to modify them. At that time to protect them in the cloud we can use virtual patching. Many 3 party extensions are available from azure marketplace for that. Virtual patching works with WAS and WAF together. It uses WAS( Web Application Scanning) to scan installed applications in the virtual machine and whenever it finds a threat it creates an automatic rule in the Web Application Firewall (WAF). This security option is best for many lifts and shifts of legacy virtual machines or physical machines.&lt;/p&gt;

&lt;p&gt;The Azure Security center uses machine learning to continuously assess security and vulnerability levels of your Virtual Machines, Networks and service configurations. It also gives you actionable recommendations to prevent exploits before they occur.&lt;/p&gt;

&lt;p&gt;Example of Virtual Machine recommendations by Azure Security Center are as below:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Apply a Just-In-Time network access control&lt;/li&gt;
  &lt;li&gt;Enable NSG&lt;/li&gt;
  &lt;li&gt;Apply Disk encryption&lt;/li&gt;
  &lt;li&gt;Apply System updates&lt;/li&gt;
  &lt;li&gt;Restrict access through internet facing endpoint&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/LZyrRC0vuRzAIk-eGRYkB04C4kAbHctU3BqFOHR3E43GMxVuDJosv5I2yH7r9qhkSwNWWChrAgW30bG9-jjRxsdXHtmoQc-GkBx88Fg4UJUs0aqe8JWKCyobSA2zrBXElj65-7sC&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Azure  Security Center has Adaptive Application Control that dynamically applies both allow and block lists to keep unwanted traffic out of your virtual machines.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/jSIG8VJfAlHW8XMihUC2_-dDZJd6-yf0_YKqOS2gGFwhMViU6KskOMn16w0eaNWy1sV4TJkYZeM6T-YuPmG5TCfquu1NkrWNDCoc8O8s9k5rXzWFDhxOnMPXmSwH6HLmRhAvB9lp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If you are using Hybrid Cloud still you can leverage the Azure Security Center features for your on-premise or  3rd party cloud resources. Because Azure Security Center gives many features for your VMs in other clouds and in your data center.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/w3nVZsAZMdIrNweOVxGjTDchCACkOZirqoOOo435qJZsHsChKypEJ_r0n-qSgVyweOjKCPxmQH5LGhFM1bOKyX0lWexWg8hh1nLWcAxlAxopAfvj9CM15_zg1iArsh58J6_PABVK&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can implement Intelligent Threat Detection and Response.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/8ZQdTANFJN_8jsAy_u9uKs-yLy2YvfUb2UU48pUsfye2fCb3rsHU8gqJpglU7WGlFKoDt3ikdRaHar61BE3tvTJJekNxJuOvYS3bm6A-cdZFZ4A2TTXD_LPVcWjVVnia1hipbYQX&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The security center leverages the Microsoft Intelligent Security Graph to discover and take action against attacks. It combines cyberintelligence that Microsoft collects across all of its services and industry data to block known attack patterns. You can also prioritize alerts and incidents that are important to you.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/jvh9AeHoqP4CrjHG5yzc7rp9LoL7tQA0y5kZpEEPvNxjFsbhQX5KQ_rXOr83VNPKkrIl2GxZOC3-AFEIztNjb7boSz1J77wDUfQlzJ03lc82xot6aDUL3C1DJM3CKlBtlZRnJpws&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You also get a unified view for forensics analysis and the ability to search across all of your compute resources.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/8Cj9H6tZTO9V6tDB-K6kwlBLNYbyPZ3kJlHBB1tJJkzljzt1ynlasBJGPm6jciWNueT8lHRVadJ61hASdBnAfdg799S45NFFxcVOdVfIRlZTom_BXddFC_TnvryI-GAxjFZcv0Pm&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can also configure the sys log, setting the advanced threat analytics.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/7z8yvlksVrU4vwYIUm_w9wSHrUOfrggbK2RXbBQJUWkXoxXc8GMTnLHBfIynzmZq2T7B_mGhZCiTgA-0IuJNx6z1g1xRL3dLEuPvhKboa-r2I36utECJFX6vjZ473O1EcaIFv_Ue&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can even visualize threat intelligence&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/7GV-Bl0qbpKnzUb0ncAW2wwHYUkMpYlxzNJCyHzPmyrN28xEDXZI_gWiTDeyGXP9VC7RUPVu21hiaHwo_oI73q3VaZqoMbRIcjFkZT_5DswNglQC4YLajfuP2303Pn-rND3qHYff&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Threat Intelligence Log Search will show you the tracing for even most trending attack techniques and the geographic regions affected.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/FsnxlZWavD8rtxz2JDVJx0Uh42Ye9YBmnpqqgopqgoa4uYc-DRqJAyp-P3E0hQWn-_kovdDPvi3Fg3Bw154cykOhtPmBsv2abPh9xNRKuoEbekSpFeuvzRFLb2bNfyTJUgpVYQrD&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;application-protection&quot;&gt;Application Protection&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/WkCU8ENZvUKyrIsgeitfdkSoLKZ5sIIeXx-l-wG7GqdGNxfljmodVVC9tZe8nmf9TqFg-xD0_cMHwcnP-4-Xcxhk7c6WFpgRJuF1RvN6DPQ-ceesbLPA89UcYzdnuZyOVw3r0E-L&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Applications are right on top of the data. Therefore, securing applications is a high priority. Maximum attackers are looking to attack applications only.  We can do below things to protect our applications&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;SSL/TLS, HTTPS&lt;/li&gt;
  &lt;li&gt;Single Sign On&lt;/li&gt;
  &lt;li&gt;Application integrity ( adhering to the policies like following NIST guidelines )&lt;/li&gt;
  &lt;li&gt;Vulnerability Scans&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Applications installed or used in Azure cloud for accessing and presenting data. Application securities are governed through data, Virtual Machines or compute (IaaS) and platform (PaaS) services in Azure. Web applications can use azure Managed Service Identities to streamline secure communications with other services in Azure connected to Azure Active Directory.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/B38z9MJiPn4TGje_O2Dw1ncenCsp80skbgp9w2x9Xh_LSHFNoBAo-MUeOA5oSruenzZeS5-Mal9vCxriDJZGIlauSmh6-4dxgdZ1XY36nP6K9XR2zC6Z9EP78r4kSZ9EehsMWusm&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;For your applications to make your data-in-transit encrypted you must enable SSL/TLS. From Azure Web apps you can manage SSL certificates and your app can request a valid certificate for all incoming requests.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/aS6swqis8f0x9QVa1p45ptE-QoOkhyB2gAdPVZJAxRjsOH4tyKRDGQEqURxloaBZfDUcBY5HOyUNyfLsKHa4cmYzH-fMZphi2gAwQWCjJp8AdoRVJEmLvbCCvBiMWCfsB_7ZbK8x&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;data-protection&quot;&gt;Data Protection&lt;/h2&gt;

&lt;p&gt;Data protection is the most critical thing. Because it is at the core of your applications and services layer. You must secure your data at rest and in-transit. You can use encrypted volumes to get protected by underline infrastructure.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/KlnifAjbBE8FlnuLghwEA6Eg8s_bE5W5azVTnF3dNbXJWO5syNrAWy_HnCu6do7O6Z_QYD3-PHqC0gs-9XMP-8FGhxkD9BlktLOPbqZjrZsx7EXfWT0qo0WHGCj19Iw09nDVg1ZP&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Regardless of structured or unstructured data their protection is built-in out of the box over Azure cloud.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/x1sYgv-KmQFZPKEZUzbMz74paeiGL4RRjHO2aKCTqFoeSth8x6XrirHDyq4ZiFggV8W2-E7obGfuS1WXX_L90w2zhYmyCH1k3to8WYXg5e5i9r7UId0BgaHtRgsrIbdbJwphXIe2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;structured-data-protection&quot;&gt;Structured Data Protection&lt;/h3&gt;

&lt;p&gt;For structured data, all data is encrypted at rest.  And you can use machine learning already built-in Azure security center to proactively look for and alert you on potential security vulnerabilities.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Enable Auditing &amp;amp; Threat detection on SQL databases&lt;/li&gt;
  &lt;li&gt;Enable Transparent Data encryption&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/lX7hSL70qigudG3PuWcttAMffG82QDrIMo1gUyAtqDCltHBe_Uxkugyz-ozw8uTewz2NBljLhdCcojqbt4uihJTAdpUt8JsS_LzH6CukkoSrN39Q9E7W1inIeZPt6QxoKamqFoYv&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In SQL server which stores structured relational data. You can enable threat detection on database level or entire server level. Threat detection can be related to data encryption,  enabling in-security telemetry.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/n4IyubCpQ_YTzCkULc5ZQ--Ca1hT6CQ5YGQUC3Zp7QtxwrbetwICZ5MQ2WJwsYiUIvY6f-8zAwVvi9Jn4cvJVJkC_PYAQ7ll6KBd1YPIFXi4zRy-WVnmo_6syD9lqT46cXjpuiUl&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In the SQL Database service itself there is vulnerability assessment where you can get extensive capabilities to recommend and enable sensitive information discovery and classification.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/n3OSbj9ATSvd62_1AjApmu08aAigVAwc0EzI4IvlT5_DJRP5B-5Kk1Yr3_7TEfdhuFRs7uQub-0-rhtuXwSA78QwImUBhMO0LP-X6_4Vb3KdvbYHaSQ72Tm1kEgg1s7DAAvfsmR8&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Azure SQL database service does dynamic data masks to obscure data fields and more.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/o6KpDoQ2H7o-ICfwTxu4gYAw9arevhDievkajDKCs58VCLRFzMONUQoAr05WiS2GBiLAEcufFmtL3BLB-5iKJ1tvwmJnolPZgXMb2XMIVaBGEFRux4THygOGA-pyATxp7xDDShLd&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Database service just needs to enable these threat protection then Azure security Center will alert you for any vulnerabilities found.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/YwiFtzKgXgP04_k09mqovNccFzWdC42wT-xNfMzweS5sb5AQ3WQhy7FTEOqhJtECvpzM4fO-HXyUUGdrqC7zTJgFa4V7gEMFwrE-nzb1rhsUgwEUrOZd1uuTAgV819eiYhw3aBN_&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;non-structured-data-protection&quot;&gt;Non Structured Data Protection&lt;/h3&gt;

&lt;p&gt;Non structured data like blobs, files, tables and queues are also encrypted at rest in azure cloud and each account is geo-redundant.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh4.googleusercontent.com/QuAOQ4RtCAIH3eZ5-WivrHKulS2iAe20rsKlwa5_5WtoXClu2B8LQ4nk3jtLaCQJIXVjOUIJdreH8lcEHbyeiAPqVr8EcPYD6hbRte4gColF7rIDbIVgQsBX2vJWa0jZbqzIQCTE&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can use access keys to control authentication, Shared access signature for secure delegate access and granular firewall controls to restrict public network access.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/_K2uqutTalHQG0iCyLRzNkXZCUF9MtBpexeYRLw8TBX2i64QaYiTrYqstm_M9tg6soeZDeKsczQyZVWoSunhUAOaGb3QHa3prbwiW4-vZISyuIupnsjnw6wjKxRkdIOSvUUnjVIq&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Azure Security Center will report its findings whenever security at risk or protections are disabled by your admin.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/vDS4A324c7pmIBqMj5KofsEpSeyb9RtnsRk7XXcOjIv-fK_NUhkV2zVFUQ4wjYytTqRHEEw8zWqcsasTvl-ETP1IrJ64msos0R3f_3HK3udHeHu3WMl1fnLwRsXBWjrPHw8DT89J&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;The idea behind the defense in depth approach is to defend a system against any particular attack using several independent methods. Defense in depth is in-built in Azure cloud and it facilitates keeping the security in multiple layers of your architecture. I am also sure the same kind of facilities are available in other cloud environments like in Amazon AWS &amp;amp; Google Cloud. So it’s a matter of awareness and making your cloud secure by properly utilizing the services given by you cloud provider.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="azure" /><category term="tutorial" /><category term="beginners" /><category term="cloud" /><summary type="html">In a traditional data center you create one perimeter, secure them by installing firewall, WAF, SIEMS etc. and have 100% confidence that the data center is secure. However, when you migrate to cloud then your VPC or Virtual Network is not 100% secure you have to not only secure your perimeter however, inside of perimeter you have to take care of security. Since it’s a public cloud you have to be more cautious and make sure whatever workload or source code you are moving to is cloud aware. There are various best practices at each level you have to take care of in order to secure your cloud.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/WQWdzrb.png" /><media:content medium="image" url="https://i.imgur.com/WQWdzrb.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Cost Optimization with Amazon EC2 Spot Instances</title><link href="https://www.rupeshtiwari.com/cost-optimization-with-aws-spot-ec2-instances/" rel="alternate" type="text/html" title="Cost Optimization with Amazon EC2 Spot Instances" /><published>2021-12-11T00:00:00+00:00</published><updated>2021-12-11T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/cost-optimization-with-aws-spot-ec2-instances</id><content type="html" xml:base="https://www.rupeshtiwari.com/cost-optimization-with-aws-spot-ec2-instances/">&lt;blockquote&gt;
  &lt;p&gt;Creating cost optimized highly scalable cloud architecture is challenging but it is possible! Using Spot Amazon Elastic Compute Cloud (Amazon EC2) instances you can save up to 90% of on-demand pricing. In this article you will learn what spot instances and what should be your strategy to use spot instances. Additionally, I will give you scenarios where most of the customers are using spot instances.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;amazon-ec2-purchasing-options&quot;&gt;Amazon EC2 Purchasing Options&lt;/h2&gt;

&lt;p&gt;Amazon Elastic Compute Cloud (Amazon EC2) offers 3 purchasing options:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;On-Demand&lt;/li&gt;
  &lt;li&gt;Reserved Instances&lt;/li&gt;
  &lt;li&gt;Saving Plans&lt;/li&gt;
  &lt;li&gt;Spot Instances&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;All of the above Amazon EC2 purchase options are also available in Microsoft Azure and Google Cloud Platform (GCP). So if you are still in a Multi-Cloud environment still you must continue reading this article.&lt;/p&gt;

&lt;p&gt;Normally, when you are designing your workload in the cloud. Make sure you combine all three of them to get better performance and huge cost savings. Amazon Auto Scaling Group (ASG) can help you to set up rules and conditions to add the desired type of the instances when set up correctly. You can combine on-demand, reserved and spot instances in a single ASG.&lt;/p&gt;

&lt;h3 id=&quot;on-demand-instances&quot;&gt;On-Demand Instances&lt;/h3&gt;

&lt;p&gt;Pay for compute capacity by the second or hour with no long-term commitments. Mostly you will use these instances for the spiky workloads or to define needs of your workload. Example: Netflix uses on-demand EC2 instances at off hours to split, encode the video files.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/BAd22sC.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;reserved-instances&quot;&gt;Reserved Instances&lt;/h3&gt;

&lt;p&gt;Significant discount (up to 70%) compared to on-demand instance pricing. You should use these types of instances for steady state applications or predictable usages, databases. &lt;img src=&quot;https://lh6.googleusercontent.com/IYJsC3v5updKOqxDw2n2EdrOW6aG6tAU_D4iS0E-WgwCe0zsOK98aar8fYibwrKCu4CYfszSTxQyhqdjksyYIr14hq4Xgb1fJhXTpVk8IzHRu69ok4uJ19xNh86dWPZ1oAOegL9V&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Example: your production servers or database servers or domain controllers that work regularly every year. You don’t want to turn them off for several years and keep these instances for the next 3-4 years or more. Then you can purchase reserved instances, with discounted prices and save huge costs.&lt;/p&gt;

&lt;h3 id=&quot;saving-plans&quot;&gt;Saving Plans&lt;/h3&gt;

&lt;p&gt;Same level of discount as you get from Reserved Instances however, you get more flexibility.&lt;/p&gt;

&lt;p&gt;The flexibility to access computers across EC2 and AWS Fargate.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/e-U_KjFJXnLZkbMpwMNWAd-v4rOxSAdTDg8fDOMxSTGgHfM86RMQoJ7_jjATpQ8BhfhtsK5A1Axx-6VUH56CAyRDJj6o0QTE_IwMUoikFg8bezlCc-fAzZ2f_8nx2cj0vGQ4JMtA&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;spot-instances&quot;&gt;Spot Instances &lt;/h2&gt;

&lt;p&gt;Spare Amazon EC2 capacity for up to 90% discount compared to on-demand instance pricing. You can use these instances for fault tolerant stateless applications, instance flexible or time-sensitive workloads. Spot instances are identical to on-demand instances in terms of performance, infrastructure platform.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/61yRh1SvEhkZ2ZMwHTWxlMFWE2T-JOxMax217ZHg6uaUgIRF8FKkpDVtV0SJ1bbPXE2kTAJlwOfwDSzqIQOzOrcnrfwZhK_tfdeoB6dprd1v7d-wDJ4nzs8YenGlPAYk8v8TQUvG&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;One thing to note is that AWS can reclaim these instances with just a 2 minute notice. Therefore, you must plan for a backup strategy while you are using spot instances. Or try to use the spot instances for the use case where you do not want to store the files, data, state or session. You should do stateless activities on spot instances to be on safer side. Amazon EC2 Spot instances are low cost, easy to use and flexible. In Big Data and Analysis use cases lots of customers are using spot instances.&lt;/p&gt;

&lt;h2 id=&quot;aws-spare-capacity&quot;&gt;AWS Spare Capacity&lt;/h2&gt;

&lt;p&gt;Amazon AWS does not reserve a minimum or maximum amount of capacity in spare. However, for the on-demand instances in order to give elasticity AWS has to keep spare capacity. Additionally, when a customer is not using on-demand instances then those capacity AWS keep it for spot customers to leverage the available capacity. AWS offers a huge up to 90% discount to spot customers with the caveat that whenever AWS needs the capacity back from you for on-demand customers, AWS will give you a 2-minute warning and take the server back off from you.&lt;/p&gt;

&lt;p&gt;On average, every week, AWS customers are using more compute capacity on Amazon EC2 Spot Instances than customers in 2013 were running across all of Amazon EC2.&lt;/p&gt;

&lt;h2 id=&quot;spot-instance-use-cases&quot;&gt;Spot Instance Use Cases&lt;/h2&gt;

&lt;p&gt;Spot instances are perfectly good for below scenarios:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Fault-tolerant&lt;/li&gt;
  &lt;li&gt;Flexible workloads&lt;/li&gt;
  &lt;li&gt;Loosely coupled systems&lt;/li&gt;
  &lt;li&gt;Stateless workloads&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In all of these above scenarios, you can trade off spot instance interruption with the huge money saving. Many customers are using spot instances for below use cases:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Big Data&lt;/li&gt;
  &lt;li&gt;CI/CD&lt;/li&gt;
  &lt;li&gt;Web Services&lt;/li&gt;
  &lt;li&gt;HPC (High Performance Compute)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Big Data use cases you might have some state while computing and when you lose the computer with 2-minute notice then your work is interrupted. However, in order to not lose state make sure you are using non-instance state like s3, HDFS, etc.&lt;/p&gt;

&lt;p&gt;CI/CD use cases you can use spot instances. In CI/CD server you run build, test etc. Maximum time CI/CD tasks, workflows and pipelines are well capable to handle any kind of server failure. Therefore, a good use case for spot instances.&lt;/p&gt;

&lt;p&gt;WebServices can use spot instances. If you are designing stateless and scalable web services by creating multiple spot instances putting them behind the load balancer then in-case one machine is taken away by AWS, you have other capacity to server for future requests. Only 5% of the time your one instance will be interrupted by AWS so existing running work interruption chances are there but very less. Since most of the time your work will be finished.&lt;/p&gt;

&lt;p&gt;High Performance Computers (HPC) can use spot instances. In the Finance domain most of the Grid that uses HPC with high throughput computing workloads which is loosely coupled can be done using spot instances. In Grid single node failing does not destroy the entire cluster. Similarly for big data we can use spot instances where anytime interruption occurs it’s just a matter of quickly reprocessing.&lt;/p&gt;

&lt;h2 id=&quot;spot-market&quot;&gt;Spot Market&lt;/h2&gt;

&lt;p&gt;The Spot Market is the unique combination of instance type and availability zone. The supply and demand of  the instance type in that availability zone is what drives the price.&lt;/p&gt;

&lt;p&gt;The following screenshot shows a price comparison for different instance types. If you see the price history of c5 large instance types over the past 3 months it is pretty stable. In this graph below we are looking at the spot market for 4 different type of instances.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/q_tMVbNI0yZn2rtOPE10dc1DmzStsmm_TrGO-wknKHSyj6R_4WVaRyTq8GVhf3m74_Dpl_hH5Cz9CBKB_D3WnE40z3KL0fXf-P_fLvd7ar6BO7xIMnuqSzQJGNAYkPXfnk5Xs2QD&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;spot-instance-best-practices&quot;&gt;Spot Instance Best Practices&lt;/h2&gt;

&lt;p&gt;While AWS never runs out of spot capacity it is possible for a specific instance, for a specific zone might not be enough spot instances available for you. Therefore, if you ask for 100 spots you may get only 50 of them. So in order to solve this problem you should not be tied with one type of spot instance rather you should use the spot capacity pool given by AWS.&lt;/p&gt;

&lt;p&gt;Additionally you must plan for interruptions since at 2 minute notice AWS can take back the spot instance from you. Over the last 3 months, 95% of spot instance interruptions were from a customer manually terminating the instance because the application had completed its work. So basically 5% of the time Amazon actually interrupts customers so 95% of time you should be able to work with spot instances without interruption.&lt;/p&gt;

&lt;p&gt;If you are architecting a highly scalable workload then Amazon auto scaling group (ASG) can help you to select the instance type, spot allocation strategy like cheapest instance, also define the split percentage between spot and on-demand instances and let ASG handle this AWS spot instance take back interruption. AWS will automatically spin up new spot instances. I have seen customers define base on-demand instances and in order to boost their application they utilize spot instances and save on 90% cost.&lt;/p&gt;

&lt;p&gt;Either you can set up ASG to spin 100% spot instances on top of the on-demand instances as your base capacity.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/vLP5Kp8O44m7WC6gyh3R4LYLsY__8aKucZS0Gdmjmu2q6zhh3wf0s5Qi7U7QNfFUq4SOL_R12267Z4iZsFZHd1HJVGlLx0cVGMNi0A3GLk_j5c8dl7g9iCUePhW5_ME44JnP75CQ&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Many customers also set up ASG to spin 50% spot instances and 50% on-demand instances on top of spot instances. Still keep their base capacity as on-demand instances.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/GVQA8D6imd0PjyIGv3VVKM6NwH-G79FWS5q-6M7JervqfwXT2R_I5twCH-qs2HsGMvZtswLABXnM-IYObSuW40FrAYpldcRXZLCRTAm1jXskooOg8A9Lhkx6lCxUFrqkHAes6cS6&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Amazon EC2 Auto Scaling dynamically reacts to the changing demand and optimizes cost as well. ASG has Fleet management where it replaces unhealthy instances. ASG also has Dynamic scaling to scale on demand.&lt;/p&gt;

&lt;p&gt;In order to optimize your Amazon EC2 workload combine the purchase options.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;In order to run steady-state workloads use reserved instances or saving plans,&lt;/li&gt;
  &lt;li&gt;For bursty, new or stateful spiky workloads use on-demand instances and&lt;/li&gt;
  &lt;li&gt;For fault tolerant applications, flexible and stateless workloads use spot instances.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://lh6.googleusercontent.com/PYRzFV0AubudQEFWGltkzw2F8ty_VISvhdUa_ast4DyjOHCssfKzgw1f2PmM6SBm3L04K2bOxAHGYiTk59wd0xgpi4eTgWELvy3tyfD9itGrpXVduqvvpmraspMkyBD8D8k8QZ5i&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;bursty-workload-optimization-strategy-with-spot-instances&quot;&gt;Bursty Workload Optimization strategy with Spot Instances &lt;/h2&gt;

&lt;h3 id=&quot;bursty-workload-example&quot;&gt;Bursty Workload example&lt;/h3&gt;

&lt;p&gt;In typical capital market domain different types of analytical workloads are there such as below:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Research
    &lt;ul&gt;
      &lt;li&gt;How to increase profit or reduce risk of a portfolio&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Reactionary
    &lt;ul&gt;
      &lt;li&gt;Human or an automatic system determine significant market volatility in the middle of trading day&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Overnight Jobs
    &lt;ul&gt;
      &lt;li&gt;At the end of the trading day, you collect most recent input for your models and  you run them at large scale&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Model backtesting
    &lt;ul&gt;
      &lt;li&gt;When you make code changes to the model you need to test the changes with 10-20 years of historical data. High resource intensive workload and you need performance since you want to deploy the model in production as well.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;In order to support such a high bursty workload you need infrastructure to auto spinning spot instances and shut them down once a task is done. You can use your own job scheduler or open source from HashiCorp as below.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.nomadproject.io/docs/internals/scheduling/scheduling&quot;&gt;Nomad&lt;/a&gt; : Job Scheduling&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.consul.io/&quot;&gt;Consul&lt;/a&gt; : Health Check, Load Balancing and Service Discovery&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Let’s take one high bursty workload example:&lt;/p&gt;

&lt;p&gt;Trading desk running on 2000 core scale to 15,000 core scale during trading hours and overnight it runs about 30,000 core scale. This is the bursty nature of the system in action.&lt;/p&gt;

&lt;p&gt;User sends the work job to Queue, the auto scaler docker container checks the state of capacity and talks to the provisioning system and spins up a couple of new capacities. Once the queue is drained it submits the request to shut down the extra capacity to the provisioning system.&lt;/p&gt;

&lt;p&gt;2000 jobs are put on the queue at the beginning of trading day they drain quickly. Then 8000, 15000 jobs are put on the queue they drain quickly.&lt;/p&gt;

&lt;p&gt;Similarly at the beginning in order to handle 2000 jobs you need 1000 workers then they all shut down again this is very bursty nature. Similarly at different time spans of the day different sets of workers will spin up like 3000 workers for 2 hours, next 4000-7000 workers for next 2 hours and so on. These are all bursty behaviour of your system.&lt;/p&gt;

&lt;h3 id=&quot;spot-instances-strategy-for-bursty-workloads&quot;&gt;Spot Instances Strategy for Bursty Workloads&lt;/h3&gt;

&lt;p&gt;How would you strategize your spot market such that you create a healthy and performant workload in this situation?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Diversified allocation strategy&lt;/strong&gt; across as many instance pools as possible is the key to quickly achieving scale and minimizing the size of termination events.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Configure your fleet to start up in multiple spot markets in parallel&lt;/li&gt;
  &lt;li&gt;Build your Launch spec a large number of spot  markets that you need to accept resources&lt;/li&gt;
  &lt;li&gt;It will give you quick fleet whenever you need to compute in high volume&lt;/li&gt;
  &lt;li&gt;Your instances are spread out across a large number of spot markets with few instances belonging to a single spot market.&lt;/li&gt;
  &lt;li&gt;So if you get termination notification from AWS in one spot market it wont impact much in your over workload.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In order to spin up 32 instances each of 30,000 core clusters of spot instances may take an hour or so. Therefore, if you use multiple spot market pools in your launch specification that can reduce your fleet startup time  to around 15 minutes. Your startup time can be sped up 70-80% with this diversified allocation strategy. So create a pool of instances and diversify them.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Make it as simple&lt;/strong&gt; as possible. AWS gives variety of EC2 instances you can group machines by their features such as&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Compute intensive&lt;/strong&gt;: high compute capacity category&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Memory intensive&lt;/strong&gt;: memory optimized capacity category&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Standard&lt;/strong&gt;: rest machines can be categorized as standard&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This way you can abstract out the AWS terminologies, instance types, number of cores etc. Rather you define workload memory intensive if they require more memory during work.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Build in safeties governors&lt;/strong&gt; everywhere. Tag your resources such that you know which team stakeholders are responsible for the payment. Put a threshold on capacity by applying some policy and governance to not spin 3000 vCore machines if you need only 1000 vCore. If you made a mistake and scale up unnecessary then you will end up paying a couple of thousands extra. Therefore, you have to apply strong governance and safety.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Monitor &amp;amp; Alert&lt;/strong&gt;: If you have bursty large-scale systems where 30,000 vcore spot fleets and 3 or 4 of them running. However, if  your system is not working then you are wasting your huge amount of money. Therefore, you must set up monitoring and alerts to send sms to the core team to get human involvement to tackle the next set of actions for a critical incident.&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;The Amazon bill is pretty complex. I am pretty sure every cloud provider bills must be the same structure. You have a lot of things and various associated costs with your virtual machines / EC2 instances. Therefore you must do your own maths and explore your cost in depth. There are many other costs you have to consider, not just the machines. Cost management is not a one day job. You must monitor them very frequently. You can check quarterly and also check future expected bills etc to learn more and tune them. Spot instances are great but power comes with responsibility. So make sure the applications that you are designing to run on spot are fault tolerant, stateless and scalable.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="aws" /><category term="tutorial" /><category term="beginners" /><category term="cloud" /><summary type="html">Creating cost optimized highly scalable cloud architecture is challenging but it is possible! Using Spot Amazon Elastic Compute Cloud (Amazon EC2) instances you can save up to 90% of on-demand pricing. In this article you will learn what spot instances and what should be your strategy to use spot instances. Additionally, I will give you scenarios where most of the customers are using spot instances.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/7tGRoEv.png" /><media:content medium="image" url="https://i.imgur.com/7tGRoEv.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">How to Maintain Well-Architected-Framework on Cloud</title><link href="https://www.rupeshtiwari.com/how-to-maintain-well-architected-framework-on-cloud/" rel="alternate" type="text/html" title="How to Maintain Well-Architected-Framework on Cloud" /><published>2021-12-10T00:00:00+00:00</published><updated>2021-12-10T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/how-to-maintain-well-architected-framework-on-cloud</id><content type="html" xml:base="https://www.rupeshtiwari.com/how-to-maintain-well-architected-framework-on-cloud/">&lt;p&gt;How to make sure our workload in the cloud is secure, reliable. How to monitor the cost of your cloud resources consumption? Is there any automation you can do to remind you of your cloud budget expenses, future expected cost? Is there any on-click quick fix to terminate underutilized virtual machines. Well the answer to all of these questions is &lt;strong&gt;Microsoft Azure Advisor&lt;/strong&gt;. Yes, you guessed it I will talk about azure advisor in this article. This is an important topic so stay tuned.&lt;/p&gt;

&lt;h2 id=&quot;azure-well-architected-framework--review&quot;&gt;Azure Well-Architected Framework &amp;amp; Review&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en-gb/assessments/?mode=pre-assessment&amp;amp;session=local&quot;&gt;Azure well-architected framework&lt;/a&gt; provides architectural best practices across the five pillars for designing and operating systems in the cloud.  Those 5 pillars are as follows:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Operational Excellence&lt;/li&gt;
  &lt;li&gt;Performance&lt;/li&gt;
  &lt;li&gt;Cost&lt;/li&gt;
  &lt;li&gt;Reliable&lt;/li&gt;
  &lt;li&gt;Secure&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Microsoft has a &lt;a href=&quot;https://docs.microsoft.com/en-gb/assessments/?mode=questionnaire&amp;amp;session=d5ecfe19-a58f-497d-9df4-0b176437c610&amp;amp;question=threat&amp;amp;category=Security&quot;&gt;well architected review&lt;/a&gt; that will give you recommendations that customers can focus on. It will include existing workload and recommend things to learn and implement to improve.
&lt;img src=&quot;https://i.imgur.com/xYMTMmS.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;azure-advisor&quot;&gt;Azure Advisor&lt;/h2&gt;

&lt;p&gt;Azure advisor gives recommendations to all cloud resources based on a well architected framework. You can access Azure Advisor recommendations as an owner, contributor, or reader of a subscription. Once moving workload on the cloud. Azure advisor is your personal advisor to keep you workload standout on 5 pillars of a well architected framework.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/kCqwu9D.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;overall-advisor-score-for-c-level-executives&quot;&gt;Overall Advisor Score for C-Level Executives&lt;/h2&gt;

&lt;p&gt;Azure Advisor shows overall score this is the high level view for your entire resources present within the subscription. The higher the score the healthier your technical portfolio is. This is the number that is more likely you will show to your CTO.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/4ktlepW.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;creating-advisory-automatic-alerts&quot;&gt;Creating Advisory Automatic Alerts&lt;/h2&gt;

&lt;p&gt;Checking these recommendations given by Azure Advisor manually is not a great idea. Therefore, you must create automatic alerts in Azure Advisor. These alerts can do various actions including sending sms, emails to core team or even calling webhook to create tickets in zendesk.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/HKw9O7g.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can even create a digest for a given subscription and select the desired 5 pillars and weekly you will get a summary of Azure advisor recommendations.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/pJWFzP2.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-do-you-know-advisor-score-is-good&quot;&gt;How do you know Advisor score is good?&lt;/h2&gt;

&lt;p&gt;You can check the score history by monthly/weekly or days and understand if the score is increasing or decreasing by benchmarking it.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/0vGPqKw.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Y7KjbnJ.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The best way to increase score is by:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Split your workload that is business critical and make it more reliable by following all recommendations and tradeoff on cost.&lt;/li&gt;
  &lt;li&gt;Split your workload by environment for production/non-production subscriptions. For a development/test environment, cut your cost and trade off on reliability.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;how-to-improve-cloud-advisor-score&quot;&gt;How to improve Cloud Advisor Score?&lt;/h2&gt;

&lt;p&gt;You must go to the Azure Advisor and check all of the 5 tabs related to the 5 pillars of a well architected framework and follow the quick fix and recommendations to improve your score.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/WBYLnMb.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here are the proposed recommendations that you should follow in order to make your system adhere to a well architected framework.&lt;/p&gt;

&lt;h3 id=&quot;operational-excellence&quot;&gt;Operational Excellence&lt;/h3&gt;

&lt;p&gt;Operational excellence recommendations in Azure Advisor can help you with:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Process and workflow efficiency.&lt;/li&gt;
  &lt;li&gt;Resource manageability.&lt;/li&gt;
  &lt;li&gt;Deployment best practices.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Below are the recommendations that you can see in the Operational Excellence tab of the Advisor dashboard.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Azure Policy recommendations like add tags, restrict creating resources to certain regions etc.&lt;/li&gt;
  &lt;li&gt;Design your storage account to prevent reaching the maximum subscription limit.&lt;/li&gt;
  &lt;li&gt;Enable traffic analytics to view insights into traffic patterns across azure resources.&lt;/li&gt;
  &lt;li&gt;Increase vCPU limits for your deployments for Pay-As-You-Go subscription.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;performance&quot;&gt;Performance&lt;/h3&gt;

&lt;p&gt;The performance recommendations in Azure Advisor can help improve the speed and responsiveness of your business-critical applications.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Reduce DNS TTL (time-to-live) on your traffic manager profile to fail over to healthy endpoints faster.&lt;/li&gt;
  &lt;li&gt;Improve database performance based on usage history&lt;/li&gt;
  &lt;li&gt;Upgrade library to latest versions for better reliability and performance example storage client library version.&lt;/li&gt;
  &lt;li&gt;Use managed disks to prevent disk I/O throttling&lt;/li&gt;
  &lt;li&gt;Improved VM performance and reliability using premium storage that gives SSD I/o-intensive disk for low-latency high IOPS.&lt;/li&gt;
  &lt;li&gt;Improve MySQL connection management by reducing the number of short-lived connections and eliminating unnecessary idle connections.&lt;/li&gt;
  &lt;li&gt;Use ARM template for template deployment, security&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cost&quot;&gt;Cost&lt;/h3&gt;

&lt;p&gt;Here are some examples of the recommendations given by Azure advisor to save your cloud cost.&lt;/p&gt;

&lt;table&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Potential Yearly Savings&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;What to do?&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Impacted Resources&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;1864 USD
   &lt;/td&gt;
   &lt;td&gt;Right Size or Shutdown underutilized virtual machines. CPU utilization &amp;lt; 5%
   &lt;/td&gt;
   &lt;td&gt;2 Virtual Machine
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;80 USD
   &lt;/td&gt;
   &lt;td&gt;Delete Public IP address not associated to a running Azure resource
   &lt;/td&gt;
   &lt;td&gt;2 Public IP Address
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;h3 id=&quot;reliability--high-availability-recommendations&quot;&gt;Reliability / High Availability Recommendations&lt;/h3&gt;

&lt;table&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Potential Benefits&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;What to do?&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Impacted Resources&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Ensure Business Continuity&lt;/strong&gt; through VM resilience
   &lt;/td&gt;
   &lt;td&gt;Add more VM for improved Fault Tolerant
   &lt;/td&gt;
   &lt;td&gt;Availability Set
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;Improved &lt;strong&gt;Data Resilience and Performance&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;Enable VM backup to protect your data from corruption and accidental deletion
   &lt;/td&gt;
   &lt;td&gt;Virtual Machine
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Ensure Business Continuity&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;Use Multiple AZ for data center level disaster
   &lt;/td&gt;
   &lt;td&gt;Availability Zone
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Save and Recover &lt;/strong&gt;your data when blobs or blob snapshots are accidentally overwritten or deleted
   &lt;/td&gt;
   &lt;td&gt;Enable soft delete to protect your blob data
   &lt;/td&gt;
   &lt;td&gt;Storage Account
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;h3 id=&quot;security&quot;&gt;Security&lt;/h3&gt;

&lt;table&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Potential Benefits&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;What to do?&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Impacted Resources&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Prevent &lt;/strong&gt;potential security breaches
   &lt;/td&gt;
   &lt;td&gt;Web apps should request an SSL certificate for all incoming requests
   &lt;/td&gt;
   &lt;td&gt;8 App Services
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Prevent &lt;/strong&gt;potential security breaches
   &lt;/td&gt;
   &lt;td&gt;Private endpoint should be configured for key vault
   &lt;/td&gt;
   &lt;td&gt;3 Key Vaults
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Prevent &lt;/strong&gt;potential security breaches
   &lt;/td&gt;
   &lt;td&gt;Azure Cosmos DB accounts should have firewall rules
   &lt;/td&gt;
   &lt;td&gt;1 Cosmos DB account
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Prevent &lt;/strong&gt;potential security breaches
   &lt;/td&gt;
   &lt;td&gt;Storage account public access should be disallowed
   &lt;/td&gt;
   &lt;td&gt;2 Storage Accounts
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Prevent &lt;/strong&gt;potential security breaches
   &lt;/td&gt;
   &lt;td&gt;Storage accounts should restrict network access using Virtual Network Rules
   &lt;/td&gt;
   &lt;td&gt;2 Storage Accounts
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Prevent &lt;/strong&gt;potential security breaches
   &lt;/td&gt;
   &lt;td&gt;Virtual Network should be protected by Azure Firewall
   &lt;/td&gt;
   &lt;td&gt;1 Virtual Network
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Prevent &lt;/strong&gt;potential security breaches
   &lt;/td&gt;
   &lt;td&gt;Diagnostic logs in Search Services should be enabled
   &lt;/td&gt;
   &lt;td&gt;1 Search Service
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="webdev" /><category term="tutorial" /><category term="beginners" /><category term="cloud" /><summary type="html">How to make sure our workload in the cloud is secure, reliable. How to monitor the cost of your cloud resources consumption? Is there any automation you can do to remind you of your cloud budget expenses, future expected cost? Is there any on-click quick fix to terminate underutilized virtual machines. Well the answer to all of these questions is Microsoft Azure Advisor. Yes, you guessed it I will talk about azure advisor in this article. This is an important topic so stay tuned.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/aPeeiUM.png" /><media:content medium="image" url="https://i.imgur.com/aPeeiUM.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Introduction to CAP Theorem</title><link href="https://www.rupeshtiwari.com/introduction-to-cap-theorem/" rel="alternate" type="text/html" title="Introduction to CAP Theorem" /><published>2021-12-09T00:00:00+00:00</published><updated>2021-12-09T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/introduction-to-cap-theorem</id><content type="html" xml:base="https://www.rupeshtiwari.com/introduction-to-cap-theorem/">&lt;blockquote&gt;
  &lt;p&gt;Are you planning to design your next advanced distributed architecture? Make sure you are aware of the concepts such as high availability, consistency and partition tolerance. The CAP theorem states that a distributed system cannot simultaneously be consistent, available, and partition tolerant. CAP Theorem is very important in the Distributed systems, Microservices architecture, Big Data world, especially when we need to make trade offs between the three, based on our unique customer’s use case.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;CAP stands for C - Consistency, A - Availability, P - Partition tolerance.&lt;/p&gt;

&lt;p&gt;While building a distributed system you will get 2 things up and running at a time and the 3rd thing you will have to sacrifice. CAP theorem helps system architects to make better decisions to trade off to design distributed systems based on requirement and customer priorities.&lt;/p&gt;

&lt;p&gt;AP - If you make the system Highly Available and Partition Tolerance then you will not get immediate consistency. It has to be eventually consistent.&lt;/p&gt;

&lt;p&gt;CA - Consistent and Highly available system will  be not partition tolerant at all times&lt;/p&gt;

&lt;p&gt;CP - Consistent and Partition Tolerant system are not highly available&lt;/p&gt;

&lt;p&gt;Even though you try to make all 3 features to be available in a distributed system you will have to trade off on any one feature. 
&lt;img src=&quot;https://i.imgur.com/5ApKUNW.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;availability--partition-over-consistency-example&quot;&gt;Availability &amp;amp; Partition over Consistency Example &lt;/h2&gt;

&lt;p&gt;The application Twitter is highly available and has good partition tolerance. System has to be shared in a very smart way. So it has to be highly available. Here you can sacrifice Availability. It doesn’t matter if I get the tweet from someone immediately. It’s okay to get after 5 min to receive notifications. However, you should be available and partition tolerant&lt;/p&gt;

&lt;h2 id=&quot;availability--consistency-over-partition-tolerance-example&quot;&gt;Availability &amp;amp; Consistency over Partition Tolerance Example &lt;/h2&gt;

&lt;p&gt;Payment service you can not comproosed with consistency where you withdraw the amount and the bank backend when they query and they see a different amount is not acceptable. You can compromise with partition tolerance however, the payment system has to be highly available.&lt;/p&gt;

&lt;h2 id=&quot;what-is-consistency&quot;&gt;What is consistency?&lt;/h2&gt;

&lt;p&gt;Consistency in a distributed system is regardless of the node you pick, data you will get for a query will always be the same. Either you get the latest information or you do not get any information.&lt;/p&gt;

&lt;p&gt;If service 1 updated N1 and service 2 query N2 it should get the latest info updated by service 1 at N2. 
&lt;img src=&quot;https://i.imgur.com/wLesuWU.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;what-is-availability&quot;&gt;What is availability?&lt;/h2&gt;

&lt;p&gt;Every request that comes to the data store should get a response and it should not timeout. It can fail for authentication authorization but not for timeout.&lt;/p&gt;

&lt;p&gt;If you have 4 nodes out of that N3 went down. Any application that is connected should not be directed to N3 and routed to a healthy node. So that your system is highly available. In case your request goes to N3 and the application shows 500 server errors your system is not highly Available. Your system should automatically route the request to the healthy available nodes hence make your system highly available. &lt;img src=&quot;https://lh5.googleusercontent.com/s-Vx-ep2gasLiH_MSzV8muqDD5t6t-3SqUrULQ-kjQGNFQb8Z9NGGWNsnB2IIMvwmi-wlXnp-kos2ajGdfx5IAZZ_V3cp6z9D7_ynkE_VxILn091s0xXITMo1ui3jQfmdGyVKsj8&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;what-is-partition-tolerance&quot;&gt;What is Partition Tolerance?  &lt;/h2&gt;

&lt;p&gt;Even though the connection between some nodes break, still every request coming to your server should serve and respond.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/ZHFtnBf.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Suppose service updated the user address in N3 and to make the system partition tolerant the new data has to be replicated in all of the nodes. If N4 is disconnected or down so if the same service query the updated latest info of the user from N4 it will not get the latest information. In this scenario your application is still available and partition tolerant however it is not consistent. So whenever the connection is resumed then N4 will be updated.&lt;/p&gt;

&lt;h2 id=&quot;can-we-achieve-all-3-features-in-a-distributed-system&quot;&gt;Can we achieve all 3 features in a distributed system?&lt;/h2&gt;

&lt;h3 id=&quot;scenario-where-you-want-availability-and-partition-tolerance&quot;&gt;Scenario where you want Availability and Partition Tolerance&lt;/h3&gt;

&lt;p&gt;At a given moment a system can’t be consistent if it is highly available and partition tolerant.&lt;/p&gt;

&lt;p&gt;Suppose if you have 4 nodes. One node gets updated with the latest data. In order to keep our system partition tolerant we have to replicate the data in all of the nodes. In the case of a larger system there could be 100, 000 of nodes and while it is replicating data. If someone query to the node where replication is pending at that time your system will return stale data and is not consistent.&lt;/p&gt;

&lt;p&gt;Eventually all of the nodes will be synced up and you will get the latest info that is called eventual consistency. However, there is a certain period of time when the system will not be consistent. In Twitter You must tradeoff consistency however, you must invest on availability and partition tolerance.&lt;/p&gt;

&lt;h3 id=&quot;scenario-where-you-want-availability--consistency-as-high-priority&quot;&gt;Scenario where you want Availability &amp;amp; Consistency as high priority&lt;/h3&gt;

&lt;p&gt;For RDBMS suppose you have a Master Slave kind of scenario where you read and write in the primary instance of the database and continuous replication is happening in the secondary database you can use Amazon AWS RDS service. You will have consistency and availability. You do not have partition tolerance. Since you are not sharing your data. When you are making your system like payment, security situation.&lt;/p&gt;

&lt;h3 id=&quot;scenario-where-you-want-consistent-and-partition-tolerant&quot;&gt;Scenario where you want Consistent and Partition Tolerant &lt;/h3&gt;

&lt;p&gt;Suppose you make changes to N1 and update user info. IF you want to keep it consistent and partition tolerant to then in order for a service to read the consistent data from N3. You have to wait for sometime to allow your data to be replicated fully to N3 till then almost your system is unavailable so in order for it to be consistent your system has to be unavailable means sacrificing the availability part of it.&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;For the brief period of time you are losing either Consistency, Availability and Partition tolerance. That is how eventual consistency is now popular: you are making a highly available and partition tolerant system and make your system consistent eventually. After knowing the pillars of CAP theorem you will be now able to design distributed systems exactly by knowing your customer requirements and concerns.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="architecture" /><category term="tutorial" /><category term="beginners" /><category term="cloud" /><summary type="html">Are you planning to design your next advanced distributed architecture? Make sure you are aware of the concepts such as high availability, consistency and partition tolerance. The CAP theorem states that a distributed system cannot simultaneously be consistent, available, and partition tolerant. CAP Theorem is very important in the Distributed systems, Microservices architecture, Big Data world, especially when we need to make trade offs between the three, based on our unique customer’s use case.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/ZsKhnfj.png" /><media:content medium="image" url="https://i.imgur.com/ZsKhnfj.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Introduction to Point of Presence and Network Access Point</title><link href="https://www.rupeshtiwari.com/introduction-to-point-of-presence-and-network-access-point/" rel="alternate" type="text/html" title="Introduction to Point of Presence and Network Access Point" /><published>2021-12-09T00:00:00+00:00</published><updated>2021-12-09T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/introduction-to-point-of-presence-and-network-access-point</id><content type="html" xml:base="https://www.rupeshtiwari.com/introduction-to-point-of-presence-and-network-access-point/">&lt;blockquote&gt;
  &lt;p&gt;Point of presence is a fundamental block of the telecommunication domain. You must be aware of this concept. If you want to system design for video content delivery like YouTube, Netflix or Hotstar.com then you must learn what is PoP and how this helps to propagate massive amounts of content across the globe with faster performance and lower latency.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;what-is-the-internet&quot;&gt;What is the internet?&lt;/h2&gt;

&lt;p&gt;The internet is a massive network of interconnected smaller networks.&lt;/p&gt;

&lt;h2 id=&quot;what-is-the-point-of-presence-pop&quot;&gt;What is the Point of Presence (PoP)?&lt;/h2&gt;

&lt;p&gt;Point of Presence (PoP) is the Network Interface Point between communicating entities. A PoP is located in a data-center that houses servers, routers, network, switches, multiplexers and other network interface equipment. PoPs are located at colocation centers and Internet exchange points. A PoP is the local access point for an Internet Service Provider (ISP). PoP consists of high-speed telecommunications equipment that  helps customers to connect to the internet via their ISPs.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/E4bOvEl.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;(image taken from &lt;a href=&quot;https://networkencyclopedia.com/point-of-presence-pop/&quot;&gt;https://networkencyclopedia.com/point-of-presence-pop/&lt;/a&gt; )&lt;/p&gt;

&lt;h2 id=&quot;point-of-presence-in-action-example&quot;&gt;Point of Presence in Action example &lt;/h2&gt;

&lt;p&gt;Chris is watching Sky News on his laptop, Chris Internet Service Provider (ISP) is Verizon Fios internet service provider. So Chris is part of Verizon Internet’s large network. When Cris types &lt;a href=&quot;http://www.skynews.com&quot;&gt;www.skynews.com&lt;/a&gt; his request first goes to  Verzon’s Point of Presence. But the sky news site is on another network. It is on skynews web servers.&lt;/p&gt;

&lt;h2 id=&quot;what-is-network-access-point-nap&quot;&gt;What is Network Access Point (NAP)?&lt;/h2&gt;

&lt;p&gt;So we have 2 different networks. Each one has a point of presence. But how does Chris’s request get on to the Sky’s Network?&lt;/p&gt;

&lt;p&gt;We need a Network Access Point (NAP) , a NAP is a building where Internet Service Providers can switch information on to each other’s network. Now Chris’s request can get all the way over to skynews.com by using the NAP. And  skynews.com can get all the way back to Chris’s computer.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/v94nvmL.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And there are thousands of PoPs and NAPs all around the world, helping us all stay connected.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/WkeiuwV.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;
(image taken from &lt;a href=&quot;https://www.youtube.com/watch?v=vUD8U7eLbQ0&amp;amp;ab_channel=BrooksBankict&quot;&gt;https://www.youtube.com/watch?v=vUD8U7eLbQ0&amp;amp;ab_channel=BrooksBankict&lt;/a&gt;)&lt;/p&gt;

&lt;h2 id=&quot;what-is-a-colocation-center&quot;&gt;What is a Colocation Center? &lt;/h2&gt;

&lt;p&gt;Colocation Center is a type of  data center also called a “Carrier Hotel”. Colocation  facilities provide equipment, space, bandwidth for rental to retail customers. Colocation facilities also provide space, power, cooling and physical security for the server, storage and networking equipment to other companies.&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;So when you are social networking, shopping or surfing the web, you are using lots of interconnected, smaller networks. AWS CloudFront has more than 200 PoP across the globe helping customers to deliver content faster with lower latency and high performance. In AWS PoP also provides DDoS Protection, Attack Mitigation and certificates management features. Amazon prime videos are delivered via AWS PoP only.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="telecom" /><category term="tutorial" /><category term="beginners" /><category term="cloud" /><summary type="html">Point of presence is a fundamental block of the telecommunication domain. You must be aware of this concept. If you want to system design for video content delivery like YouTube, Netflix or Hotstar.com then you must learn what is PoP and how this helps to propagate massive amounts of content across the globe with faster performance and lower latency.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/YWhcyP7.png" /><media:content medium="image" url="https://i.imgur.com/YWhcyP7.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Mandatory JavaScript Knowledge for Coding Interview</title><link href="https://www.rupeshtiwari.com/mandatory-javascript-knowledge-for-coding-interview/" rel="alternate" type="text/html" title="Mandatory JavaScript Knowledge for Coding Interview" /><published>2021-12-09T00:00:00+00:00</published><updated>2021-12-09T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/mandatory-javascript-knowledge-for-coding-interview</id><content type="html" xml:base="https://www.rupeshtiwari.com/mandatory-javascript-knowledge-for-coding-interview/">&lt;blockquote&gt;
  &lt;p&gt;Are you attempting coding interview challenges in Javascript? Then make sure you learn below mandatory JavaScriipt apis and utilities.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;math-library&quot;&gt;Math Library&lt;/h2&gt;

&lt;h3 id=&quot;mathfloor-mathround&quot;&gt;Math.floor Math.round&lt;/h3&gt;

&lt;p&gt;Used in Binary Search algorithm&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/IZu0fyb.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;mathabs&quot;&gt;Math.abs&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Fgh6Eca.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;array-related&quot;&gt;Array related&lt;/h2&gt;

&lt;h3 id=&quot;array-slice&quot;&gt;Array Slice&lt;/h3&gt;

&lt;p&gt;Used in Merge sort algorithm.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/TPf6sHD.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;array-sort&quot;&gt;Array Sort&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/hY8qjWD.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;initialize-2d-array&quot;&gt;Initialize 2D array&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/74bDGJV.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;map&quot;&gt;Map&lt;/h2&gt;

&lt;h3 id=&quot;javascript-map&quot;&gt;JavaScript Map&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/TVb5n1i.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;difference-between-i-and-i&quot;&gt;Difference between i++ and ++i&lt;/h2&gt;

&lt;p&gt;So basically ++i returns the value after it is incremented, while i++ return the value before it is incremented.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/mwT7aco.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/mp77XBD.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;javascript-bitwise-operator&quot;&gt;Javascript Bitwise operator&lt;/h2&gt;

&lt;h3 id=&quot;right-shift-xy&quot;&gt;Right Shift x»y&lt;/h3&gt;

&lt;p&gt;Moving bit/s towards the right side in binary number.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4&amp;gt;&amp;gt;2 = 16&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x&amp;gt;&amp;gt;y&lt;/code&gt; means &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x/2^y&lt;/code&gt; divide x by 2 to the power of y.&lt;/p&gt;

&lt;h3 id=&quot;left-shift-xy&quot;&gt;Left Shift x«y&lt;/h3&gt;

&lt;p&gt;Moving bit/s towards the left side in binary number.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4&amp;lt;&amp;lt;2 = 0&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x&amp;lt;&amp;lt;y&lt;/code&gt; means &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x*2^y&lt;/code&gt; multiply x by 2 to the power of y.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="webdev" /><category term="tutorial" /><category term="beginners" /><category term="javascript" /><summary type="html">Are you attempting coding interview challenges in Javascript? Then make sure you learn below mandatory JavaScriipt apis and utilities.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/qxXxmBa.png" /><media:content medium="image" url="https://i.imgur.com/qxXxmBa.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">What is EBIT and EBITDA in Finance?</title><link href="https://www.rupeshtiwari.com/what-is-ebit-and-ebitda/" rel="alternate" type="text/html" title="What is EBIT and EBITDA in Finance?" /><published>2021-12-09T00:00:00+00:00</published><updated>2021-12-09T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/what-is-ebit-and-ebitda</id><content type="html" xml:base="https://www.rupeshtiwari.com/what-is-ebit-and-ebitda/">&lt;blockquote&gt;
  &lt;p&gt;EBITDA and EBIT is a very fundamental financial term that is nowadays mostly considered during the cloud adoption phase for IT companies. If your company is planning to migrate to cloud and you are going to present a finance key performance index to your CFO then make sure you learn these concepts.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Broadly for any company there exist 3 types of financial statements as following:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Balance sheet&lt;/li&gt;
  &lt;li&gt;Income or Profit &amp;amp; Loss (P&amp;amp;L) Statement&lt;/li&gt;
  &lt;li&gt;Cache Flow Statement&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;what-is-a-balance-sheet&quot;&gt;What is a Balance Sheet? &lt;/h2&gt;

&lt;p&gt;Balance Sheet consists of  Assets and Liabilities.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Assets&lt;/strong&gt; are of 2 types Fixed and Current Assets. Fixed Assets which you get the cash value after 1 year example real estate, building,  equipment, vehicles. Current Assets which you convert into cash within 1 year&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Liabilities&lt;/strong&gt; are 2 types: Long Term and Current. Long Term liabilities which you have to start paying after 1 year. Current liability which you have to pay off within 1 year.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/AN9wBPy.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;what-is-an-income-or-profit--loss-pl-statement&quot;&gt;What is an Income or Profit &amp;amp; Loss (P&amp;amp;L) Statement? &lt;/h2&gt;

&lt;p&gt;If you subtract your company Expenses from Revenue then you get the profit.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Profit = Revenue - Expenses
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/iMP6jRA.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The profit that you make as cash is added to the Current Assets in your Balance Sheet. So if you make more profit your cash reserves increase that increases your assets as well.&lt;/p&gt;

&lt;h2 id=&quot;what-is-a-cash-flow-statement&quot;&gt;What is a Cash Flow Statement?&lt;/h2&gt;

&lt;p&gt;A Cash Flow Statement is just like your bank account statement that shows how much money is credited (deposited) or debited (withdrawn) from your bank account.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Net Cash Flows = Cash In - Cash Out 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Cash In could be in any form of money deposit to your bank account it could be loan, income revenue, friend deposit money. Cash out could be any form of withdrawal from your account for any reason. The net balance of your cash is the net cash flows of your account.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/bFayiGL.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;EBIT &amp;amp; EBITDA is a metric of Profit and Loss statement that explains which company stock is good and which company is performing better at an operational level.&lt;/p&gt;

&lt;h2 id=&quot;amortization-vs-depreciation&quot;&gt;Amortization vs Depreciation&lt;/h2&gt;

&lt;p&gt;Tangible assets are physical assets that can be touched. Example of Tangible assets are as follows:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Buildings&lt;/li&gt;
  &lt;li&gt;Equipments&lt;/li&gt;
  &lt;li&gt;Furnitures&lt;/li&gt;
  &lt;li&gt;Vehicles&lt;/li&gt;
  &lt;li&gt;Land&lt;/li&gt;
  &lt;li&gt;Machinery&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Depreciation is the expense of a fixed asset over its useful life.&lt;/p&gt;

&lt;p&gt;Intangible assets are not physical assets, they can not be touched. Example of Intangible assets are as follows:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Patents&lt;/li&gt;
  &lt;li&gt;Franchise agreements&lt;/li&gt;
  &lt;li&gt;Organizational Costs&lt;/li&gt;
  &lt;li&gt;Proprietary process such as copyrights like purchasing cost of software license&lt;/li&gt;
  &lt;li&gt;Bonds&lt;/li&gt;
  &lt;li&gt;Employees of a company&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Amortization is the practice of spreading an intangible asset’s cost over that asset’s useful life.&lt;/p&gt;

&lt;h2 id=&quot;what-is-non-operational-expenses&quot;&gt;What is Non Operational Expenses?&lt;/h2&gt;

&lt;p&gt;Non operational expenses are the variables that differ company by company. Majorly below 3 categories of expenses are called non-operational expenses:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Interest - Depends on the company’s Financing Structure. If a company has taken a large loan then interest is high and vice-versa.&lt;/li&gt;
  &lt;li&gt;Taxes - Depends on Geography&lt;/li&gt;
  &lt;li&gt;Depreciation &amp;amp; Amortization - Past Investments. Non-Cash Expense&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;what-is-ebit--ebitda&quot;&gt;What is EBIT &amp;amp; EBITDA? &lt;/h2&gt;

&lt;p&gt;EBITDA means Earning Before Interest, Tax, Depreciation and Amortization.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;EBITDA = Gross Profit - Operating Expenses
EBIT = EBITDA - Depreciation + Amortization 

PBT = EBIT - Interest
Net Profit = PBT - Tax

EBIT = Net Profit + Interest + Tax 
EBITDA = Net Profit + Interest + Tax + Depreciation + Amortization 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Vehicle Manufacturing Company EBITDA &amp;amp; EBIT Statement&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/eND0t6N.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;why-is-ebitda-important-for-a-company&quot;&gt;Why is EBITDA important for a company?&lt;/h2&gt;

&lt;p&gt;The Net Profit of a company doesn’t describe the financial status of a company. Because, non operational expenses such as Interest, Tax component, Depreciations, Amortizations vary per company. Example some companies might have no loan so no interest so they might show more net profit. Other companies have taken larger loans so their interest rate is high so net profit becomes low. Taxes can change as per geographical area. Depreciations may differ per company based on old/new physical assets. Therefore, you should financially compare companies at operational level only.&lt;/p&gt;

&lt;p&gt;In order for creating a Level &lt;a href=&quot;https://en.wikipedia.org/wiki/Level_playing_field&quot;&gt;Playing Field&lt;/a&gt; you will use EBIT &amp;amp; EBITDA which is used to compare companies on their operational costs. That is the recommended way to identify which company is financially stronger.&lt;/p&gt;

&lt;p&gt;EBITDA is mostly considered in heavily capitalized industries like telecommunications, manufacturing, oil &amp;amp; gas etc. industries.&lt;/p&gt;

&lt;p&gt;EBIT is mostly used for service oriented industries like Consulting and Technologies.&lt;/p&gt;

&lt;h2 id=&quot;why-do-c-level-executives-care-more-about-ebitda&quot;&gt;Why do C-Level Executives care more about EBITDA?&lt;/h2&gt;

&lt;p&gt;Because when you move your company to cloud then you get rid of capital expenses and incur more operational expenses. As capital expenses decrease and operational expenses increase the EBITDA value decreases. In most of the companies C-level executives like CFO, CIO, CEO get incentives, bonus based on EBITDA value. If EBITDA decreases then their bonus money gets reduced. However, IT companies also have data center staff expenses that are being calculated as the operational cost. Since that costs are now reduced or completely removed based on how many data centers your company closes. That value can balance out the EBITDA value and make your c-executives happy in terms of financial bonus money.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion &lt;/h2&gt;

&lt;p&gt;So EBITDA is the term used by many software IT industries to publish their financial growth. You can check Microsoft Azure EBITDA margin over the last 10 years here in this chart&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/5mJdn6U.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.macrotrends.net/stocks/charts/MSFT/microsoft/ebitda-margin&quot;&gt;microsoft ebitda margin&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="finance" /><category term="tutorial" /><category term="beginners" /><category term="cloud" /><summary type="html">EBITDA and EBIT is a very fundamental financial term that is nowadays mostly considered during the cloud adoption phase for IT companies. If your company is planning to migrate to cloud and you are going to present a finance key performance index to your CFO then make sure you learn these concepts.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/fi40PUP.png" /><media:content medium="image" url="https://i.imgur.com/fi40PUP.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Introduction of Managed Identities</title><link href="https://www.rupeshtiwari.com/introduction-of-managed-identities/" rel="alternate" type="text/html" title="Introduction of Managed Identities" /><published>2021-12-08T00:00:00+00:00</published><updated>2021-12-08T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/introduction-of-managed-identities</id><content type="html" xml:base="https://www.rupeshtiwari.com/introduction-of-managed-identities/">&lt;blockquote&gt;
  &lt;p&gt;Do you have situations where a process is trying to use your virtual machine in the cloud and you want to protect and control the access? Do you want to use cosmos db using your server layer deployed over azure cloud without managing your own identity and passwords? Use Microsoft Managed Identity. In this article I will describe Managed Identities concepts.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;First let’s remind ourselves of what service principals are. Below are called Service Principal:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Application principal&lt;/li&gt;
  &lt;li&gt;Managed Identity&lt;/li&gt;
  &lt;li&gt;Legacy&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;what-is-managed-identity&quot;&gt;What is Managed Identity?&lt;/h2&gt;

&lt;p&gt;Managed Identity is part of the authentication process. Managed Identity is a service principal of a special type that may only be used with Azure resources. When Managed Identity is deleted, the corresponding service principal is automatically  removed. When Managed Identity is created the managed identity resource provider (MSRP) issues certificates to the identity internally. So Managed Identities are certificate based service principals.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/bmKv6pn.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Managed Identities for Azure resources (formally known as MSI (Managed Service Identity) provide Azure services with an Identity in Azure Active Directory. Azure services use this identity to authenticate to services that support Azure AD authentication without needing credentials in your code.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/MRY8iyy.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;types-of-managed-identities&quot;&gt;Types of Managed Identities&lt;/h2&gt;

&lt;p&gt;In Microsoft Azure there are 2 types of managed identities:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;System assigned&lt;/li&gt;
  &lt;li&gt;User assigned&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;system-assigned-identity&quot;&gt;System Assigned Identity&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/BWz8lDS.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Figure:- User is enabling system-assigned managed identity to the instance of an azure resource.&lt;/p&gt;

&lt;p&gt;An identity is created in the azure active directory that is tied to the lifecycle of the service instance. When the service instance or resource is deleted azure deletes the corresponding identity. Only Azure resources can use this identity to request a token from Azure Active Directory. You can not share this identity with multiple resources.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/BHRAMhV.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can only enable or disable managed identities at resource level. Workloads that are contained within a single Azure Resource workload for which you need independent identities. Example: Application that works on a single Virtual Machine.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/aEPJ3sI.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;user-assigned-managed-identities&quot;&gt;User Assigned Managed Identities&lt;/h2&gt;

&lt;p&gt;You create a managed identity as a stand-alone resource called a user-assigned managed identity. Assign it to one or more instances of an Azure service. Identity is managed separately from the resource that uses it and is not tied to the resource lifecycle. It can be shared across many azure resources. You can create, read, update, delete (CRUD) on user-assigned Managed Identity. 
&lt;img src=&quot;https://i.imgur.com/a8gGbnJ.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;For Example: Workloads that run on multiple resources and which can share a single identity. For example, workloads where resources are recycled frequently, but permissions should stay consistent like multiple virtual machines need to access the same resource. You have to assign 3 system-assigned identities in a shared azure resource.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/A4O695X.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;However, when you use system-assigned identity then you face 2 problemes:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;You have to assign multiple identities to the shared resource. Imagine if there are 100 Virtual Machines or so.&lt;/li&gt;
  &lt;li&gt;Whenever VM is deallocated then the corresponding managed identity will be deleted as well. So you have to assign a new system assigned managed identity of the VM when it is again provisioned. So you have to manage your own self.&lt;/li&gt;
  &lt;li&gt;Therefore, in this situation you should create one user-assigned managed identity that can remain always unless you delete the key.  Youjust assign that key to the azure virtual machines. And the shared resource will only allow that identity to authenticate.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You can perform CRUD operations on Managed Identity using below tools:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ARM template&lt;/li&gt;
  &lt;li&gt;Azure Portal&lt;/li&gt;
  &lt;li&gt;Azure CLI&lt;/li&gt;
  &lt;li&gt;Powershell&lt;/li&gt;
  &lt;li&gt;REST API&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Which operations are allowed with Managed Identity?&lt;/p&gt;

&lt;p&gt;System Assigned Managed Identity: can enable disable at resource level. Use RBAC to grant permissions. CRUD on Azure Activity Logs view Sign-In activity in Azure AD sign-in logs.&lt;/p&gt;

&lt;p&gt;UserAssigned Managed Identity: you can do CRUD on identities. Use RBAC to grant permissions. You can use one or more than 1 resources.CRUD on Azure Activity log view sign-in activity in Azure AD sign-in logs.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References &lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/azure/active-directory/authentication/overview-authentication&quot;&gt;https://docs.microsoft.com/en-us/azure/active-directory/authentication/overview-authentication&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals&quot;&gt;https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="webdev" /><category term="tutorial" /><category term="beginners" /><category term="cloud" /><summary type="html">Do you have situations where a process is trying to use your virtual machine in the cloud and you want to protect and control the access? Do you want to use cosmos db using your server layer deployed over azure cloud without managing your own identity and passwords? Use Microsoft Managed Identity. In this article I will describe Managed Identities concepts.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/qxXxmBa.png" /><media:content medium="image" url="https://i.imgur.com/qxXxmBa.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">What is Azure Virtual Machine Scale Sets</title><link href="https://www.rupeshtiwari.com/what-is-azure-virtual-machine-scale-sets/" rel="alternate" type="text/html" title="What is Azure Virtual Machine Scale Sets" /><published>2021-12-08T00:00:00+00:00</published><updated>2021-12-08T00:00:00+00:00</updated><id>https://www.rupeshtiwari.com/what-is-azure-virtual-machine-scale-sets</id><content type="html" xml:base="https://www.rupeshtiwari.com/what-is-azure-virtual-machine-scale-sets/">&lt;blockquote&gt;
  &lt;p&gt;Now a days distributed architecture is common. We deploy our services into many different servers to scale them up and meet our demand. However, managing all servers for &lt;strong&gt;load-balancing, scaling, make application highly available&lt;/strong&gt; is super challenging on cloud. &lt;strong&gt;Azure Virtual Machine Scale sets&lt;/strong&gt; is the great tool which does all of these automatically with &lt;strong&gt;no extra cost&lt;/strong&gt; for you. Lets learn more about Scale sets in this article.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;For Black Friday sell you want your services to be running in 50 instances and on regular day you want 5 instances. So in cloud Virtual machine scale set you get automatic scale up and down of your VM instances.&lt;/p&gt;

&lt;h2 id=&quot;scalability-vs-elasticity&quot;&gt;Scalability vs Elasticity&lt;/h2&gt;

&lt;p&gt;Scalability means to increase from 5 to 50 instances. Elasticity is to reduce 50 instances to 5. With VMSS scalability and elasticity is possible automatically.&lt;/p&gt;

&lt;h2 id=&quot;vertical-vs-horizontal-scaling&quot;&gt;Vertical vs Horizontal Scaling&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://imgur.com/EkHkAX3.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Two types of scaling vertical and horizontal.&lt;/p&gt;

&lt;h3 id=&quot;vertical-scaling-or-scale-updown&quot;&gt;Vertical Scaling or Scale Up/Down&lt;/h3&gt;

&lt;p&gt;In Vertical scaling if you have 1 core CPU and 4GB memory and if you can upgrade this configuration to 2 core CPU and 8 GB memory. This is called as Scale UP. You can reduce the configuration back to baseline which is called as Scale Down.&lt;/p&gt;

&lt;h3 id=&quot;horizontal-scaling-or-scale-outin&quot;&gt;Horizontal Scaling or Scale Out/In&lt;/h3&gt;

&lt;p&gt;Horizontal Scaling is you start with one VM and you keep adding more VM with same configuration is also called as Scale Out. You can also reduce back to 1 VM once your Sale or Business demand is over this process is called as Scale In.&lt;/p&gt;

&lt;h2 id=&quot;distributed-architecture-with-scale-sets&quot;&gt;Distributed Architecture with Scale Sets&lt;/h2&gt;

&lt;p&gt;You must need &lt;strong&gt;Distributed Architecture&lt;/strong&gt; to provide &lt;strong&gt;redundancy and improved performance&lt;/strong&gt;, applications are typically &lt;strong&gt;distributed across multiple instances&lt;/strong&gt;. In order to give your customer faster speed and low latency you may need &lt;strong&gt;load balancer&lt;/strong&gt; that &lt;strong&gt;distributes requests&lt;/strong&gt; to one of the application &lt;strong&gt;instances&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;what-is-azure-virtual-machine-scale-sets&quot;&gt;What is Azure Virtual Machine Scale Sets?&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://imgur.com/3qqKpF8.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Virtual Machine Scale Set (VMSS) let you &lt;strong&gt;Create&lt;/strong&gt; and &lt;strong&gt;Manage&lt;/strong&gt; a &lt;strong&gt;group of load balanced VMs&lt;/strong&gt;. The number of VM instances can &lt;strong&gt;automatically increase or decrease&lt;/strong&gt; in response to demand or a defined schedule.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;With virtual machine scale sets, you can build &lt;strong&gt;large-scale services for areas such as compute, big data, and container workloads&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Scale sets provide &lt;strong&gt;high availability to your applications&lt;/strong&gt;, and allow you to &lt;strong&gt;centrally manage&lt;/strong&gt;, &lt;strong&gt;configure&lt;/strong&gt;, and &lt;strong&gt;update&lt;/strong&gt; a large number of VMs.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Consistent Configuration&lt;/strong&gt;: Virtual Machine scale sets are the objects that are used to run multiple instances of your application and maintain a consistent configuration across your environment.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;notice--info&quot;&gt;VMs in a scale set are identical, so you can create them from the same base operating system image.&lt;/p&gt;

&lt;h2 id=&quot;how-virtual-machine-scale-set-vmss-works&quot;&gt;How Virtual Machine Scale Set (VMSS) works&lt;/h2&gt;

&lt;p&gt;VMSS uses &lt;a href=&quot;#minimum-instance&quot;&gt;minimum instance&lt;/a&gt; to start with and you can set the &lt;a href=&quot;#maximum-instance&quot;&gt;maximum instance&lt;/a&gt; of your virtual machine. You can setup rules based on &lt;a href=&quot;#time-based-scaling&quot;&gt;Time&lt;/a&gt;, &lt;a href=&quot;#metrics&quot;&gt;Metrics&lt;/a&gt; based to increase or decrease VM instances. VMSS has in build &lt;a href=&quot;#load-balancer-in-scale-set&quot;&gt;load balancers&lt;/a&gt;. Public load balancer works with internet traffic to your VMs. Which looks upon the CPU metrics and if CPU utilization is more than 75% then wait for some time and add another VM instance without any manual steps required.&lt;/p&gt;

&lt;h3 id=&quot;minimum-instance&quot;&gt;Minimum Instance&lt;/h3&gt;

&lt;p&gt;This defines how much instance of VM minimum you need. You can set it to 1.&lt;/p&gt;

&lt;h3 id=&quot;maximum-instance&quot;&gt;Maximum Instance&lt;/h3&gt;

&lt;p&gt;You can go up to 1000 VM instances. For example for your business you can start with 1 VM and scale out up to 3 instances. Therefore, you set Maximum instance value to 3. Therefore, even though the demand is high Azure will not spin up 4th instance. It will stay up to 3 instance only and you save budget.&lt;/p&gt;

&lt;h3 id=&quot;metrics-based-scaling&quot;&gt;Metrics Based Scaling&lt;/h3&gt;

&lt;p&gt;If you don’t know where you are going to get the maximum business, it may be today, next day or any 5 continuous days then you must go for Metrics based scaling. You can set rule like If my VM CPU utilization is &amp;gt; 75% then add one more VM if it is less than ( &amp;lt; ) 25% then remove the VM.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Manually increasing instances&lt;/strong&gt;: If you know tomorrow only you want to increase your VM instance to 4 instances. So you do that manually and revert it on the day after tomorrow.&lt;/p&gt;

&lt;h3 id=&quot;time-based-scaling&quot;&gt;Time Based Scaling&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Custom&lt;/strong&gt; : You can do &lt;strong&gt;Time Based&lt;/strong&gt; increment or decrement Here you can schedule your VMs to scale out and scale in. For example every Saturday increase the VM instance to 4 and on Sunday reduce it back to 1. You can schedule these rules.&lt;/p&gt;

&lt;h3 id=&quot;load-balancer-in-scale-set&quot;&gt;Load Balancer in Scale Set&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://imgur.com/8H6dwMy.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;An &lt;strong&gt;Azure load balancer&lt;/strong&gt; is a Layer-4 (TCP, UDP) &lt;strong&gt;load balancer&lt;/strong&gt; that provides high availability by distributing incoming traffic among healthy VMs. A &lt;strong&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/azure/load-balancer/components#frontend-ip-configurations&quot;&gt;public load balancer&lt;/a&gt;&lt;/strong&gt; can provide outbound connections for virtual machines (VMs) inside your virtual network. Public Load Balancers are used to load balance internet traffic to your VMs. An &lt;strong&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/azure/load-balancer/components#frontend-ip-configurations&quot;&gt;internal (or private) load balancer&lt;/a&gt;&lt;/strong&gt; is used where private IPs are needed at the frontend only. Internal load balancers are used to load balance traffic inside a virtual network.&lt;/p&gt;

&lt;h2 id=&quot;virtual-machine-scale-set-architecture&quot;&gt;Virtual Machine Scale Set Architecture&lt;/h2&gt;

&lt;p&gt;Virtual Machine Scale Set (VMSS) deploys Virtual Machines in a single subnet of a Virtual Network. Figure below shows Architecture of Virtual Machine Scale Set (VMSS) deployed in single subnet with Single Placement group.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://imgur.com/XUk0AFB.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Virtual Network&lt;/strong&gt; with Single Subnet is automatically created during VMSS deployment. All virtual machines specified in create VMSS blade are deployed in the Single Subnet.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Azure Load Balancer&lt;/strong&gt; is automatically created during VMSS deployment.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Placement group&lt;/strong&gt; is availability set with five fault domains and five update domains and support up to 100 VMs. Placement group is automatically created by VMSS. Additional Placement groups will be automatically created by VMSS if you are deploying more than 100 instances.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Storage&lt;/strong&gt;: VMSS can use managed disks or unmanaged disks for Virtual Machine storage. Managed disks are required to create more than 100 Virtual Machines. Unmanaged disks are limited to 100 VMs and single Placement Group.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;VM Diagnostic Logs&lt;/strong&gt; are guest OS performance counters and are streamed to Azure storage Account. VMSS uses this data for making Auto-scaling decisions.&lt;/p&gt;

&lt;h2 id=&quot;why-use-virtual-machine-scale-sets&quot;&gt;Why use Virtual Machine Scale Sets?&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Maintenance Mode Support&lt;/strong&gt;: If you need to perform maintenance or update an application instance, your customers must be distributed to another available application instance.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Automatically increase VM instances&lt;/strong&gt;: To keep up with additional customer demand, you may need to increase the number of application instances that run your application.
    &lt;ul&gt;
      &lt;li&gt;Auto scale based on metrics.&lt;/li&gt;
      &lt;li&gt;Auto scale based on a defined schedule. Suppose starting next week you are going to have a heavy peak, for next 3 days. You can define a set schedule. For example, at 9 am on Jan 2nd 2021, increase the VM instance count to 50. And at 9PM on Jan 5th when your peak ends, bring the instance count back to your baseline configuration.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Easy to create and manage multiple VMs&lt;/strong&gt; : It maintains a consistent configuration (VM size, disk configuration) across your environment. All VM instances are created from the same base OS image and configuration. This approach lets you easily manage hundreds of VMs without additional configuration tasks or network management. For basic layer-4 traffic distribution it uses Azure Load Balancer. And for advanced layer-7 it uses Azure Application Gateway.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Provides high availability and application resiliency&lt;/strong&gt;: If one of these VM instances has a problem, customers continue to access your application through one of the other VM instances with minimal interruption.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Allows your application to automatically scale as resource demand changes&lt;/strong&gt;: Like it auto increase VM instances. It can also minimizes the number of unnecessary VM instances that run your application when demand is low, while customers continue to receive an acceptable level of performance&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Works at large-scale&lt;/strong&gt; : Up to &lt;strong&gt;1000&lt;/strong&gt; Azure VM, and custom VM images up to &lt;strong&gt;600&lt;/strong&gt; VM.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;scale-set-saves-money-&quot;&gt;Scale set saves money 💰&lt;/h3&gt;

&lt;p&gt;The &lt;strong&gt;management&lt;/strong&gt; and &lt;strong&gt;automation&lt;/strong&gt; features, such as auto-scale and redundancy, incur &lt;strong&gt;no additional charges&lt;/strong&gt; over the use of VMs. You only pay for the underlying compute resources such as the VM instances, load balancer, or Managed Disk storage.&lt;/p&gt;

&lt;h3 id=&quot;benefits-of-scale-set&quot;&gt;Benefits of Scale Set&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;scenario&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Manage VMs manually&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;Use VM Scale Set&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Adding extra VM&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Manually create, configure and ensure compliance&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;Automatically create from central configuration&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Traffic Balancing &amp;amp; distribution&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Manually&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;Automatically create and integrate Azure load balancer or Application Gateway&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;High availability and redundancy&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Manually create Availability set or distribute and track VMs across Availability Zones&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;Automatic distribution of VM instances across Availability Zones or Availability Sets&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Scaling of VMs&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Manual monitoring and Azure Automation&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;Auto scale based on host metrics, in-guest metrics, Application Insights, or schedule&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Using scale set is a wiser decision with zero additional cost!&lt;/p&gt;

&lt;h2 id=&quot;building-azure-vm-using-azure-vm-image-builder&quot;&gt;Building Azure VM using Azure VM Image Builder&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://imgur.com/Ut26mIt.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Using &lt;a href=&quot;https://docs.microsoft.com/azure/virtual-machines/linux/image-builder-overview&quot;&gt;AZURE VM IMAGE BUILDER SERVICE&lt;/a&gt;, you can quickly start building standardized images without needing to set up your own imaging pipeline. Just provide a simple configuration describing your image, submit it to the Image Builder service, and the image is built and distributed. You will incur some compute, networking and storage costs when creating, building and storing images with Azure Image Builder. These costs are similar to the costs incurred in manually creating custom images.&lt;/p&gt;

&lt;h2 id=&quot;distribute-your-vm-images&quot;&gt;Distribute your VM images&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://imgur.com/2diOKki.png&quot; alt=&quot;&quot; class=&quot;full&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/azure/virtual-machines/shared-image-galleries&quot;&gt;SHARED IMAGE GALLERY&lt;/a&gt; enables image distribution to different users, service principals, or AD groups, across multiple subscriptions within your organization and regions through a centralized image management platform.&lt;/p&gt;

&lt;p&gt;Run below command for creating shared image gallery:&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;New-AzGallery&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-GalleryName&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;azdemoGallery&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ResourceGroupName&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Azure-demo&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Location&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;West&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;US&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;`
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next, we need to create Gallery definition for storing windows images:&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;New-AzGalleryImageDefinition&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-GalleryName&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;azdemogallery&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ResourceGroupName&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Azure-demo&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-location&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;West&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;US&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;winserverimages&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-OsState&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;generalized&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Ostype&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;windows&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Publisher&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;demo&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-offer&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;windows&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-sku&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;‘&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;win2016&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;’&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-to-monitor-scale-sets&quot;&gt;How to monitor scale sets&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Use &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-monitor/vm/vminsights-overview&quot;&gt;Azure Monitor for VMs&lt;/a&gt;, to see metrics about VM CPU, memory, disk and network performance&lt;/li&gt;
  &lt;li&gt;Enable monitoring &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-monitor/app/azure-vm-vmss-apps&quot;&gt;virtual machine scale set application&lt;/a&gt; with Application Insights to collect detailed information about your application including page views, application requests, and exceptions.&lt;/li&gt;
  &lt;li&gt;Configure &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-monitor/app/monitor-web-app-availability&quot;&gt;availability test&lt;/a&gt; to check application availability to simulate user traffic.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;notice--success&quot;&gt;Learn more about &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/overview?context=/azure/virtual-machines/context/context&quot;&gt;Azure Virtual Machine Scale Set&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Thanks for reading my article till end. I hope you learned something special today. If you enjoyed this article then please share to your friends and if you have suggestions or thoughts to share with me then please write in the comment box.&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;become-full-stack-developer-&quot;&gt;Become full stack developer 💻&lt;/h2&gt;

&lt;p class=&quot;notice--info&quot;&gt;I teach at &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master&lt;/a&gt;. If you want to become &lt;strong&gt;Software Developer&lt;/strong&gt; and grow your carrier as new &lt;strong&gt;Software Engineer&lt;/strong&gt; or &lt;strong&gt;Lead Developer/Architect&lt;/strong&gt;. Consider subscribing to our full stack development training programs. You will learn &lt;strong&gt;Angular, RxJS, JavaScript, System Architecture&lt;/strong&gt; and much more with lots of &lt;strong&gt;hands on coding&lt;/strong&gt;. We have All-Access Monthly membership plans and you will get unlimited access to all of our &lt;strong&gt;video&lt;/strong&gt; courses, &lt;strong&gt;slides&lt;/strong&gt;, &lt;strong&gt;download source code&lt;/strong&gt; &amp;amp; &lt;strong&gt;Monthly video calls&lt;/strong&gt;.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Please subscribe to &lt;strong&gt;&lt;a href=&quot;https://www.fullstackmaster.net/pro&quot;&gt;All-Access Membership PRO plan&lt;/a&gt;&lt;/strong&gt; to access &lt;em&gt;current&lt;/em&gt; and &lt;em&gt;future&lt;/em&gt; &lt;strong&gt;angular, node.js&lt;/strong&gt; and related courses.&lt;/li&gt;
  &lt;li&gt;Please subscribe to &lt;strong&gt;&lt;a href=&quot;https://www.fullstackmaster.net/elite&quot;&gt;All-Access Membership ELITE plan&lt;/a&gt;&lt;/strong&gt; to get everything from PRO plan. Additionally, you will get access to a monthly &lt;strong&gt;live Q&amp;amp;A video call&lt;/strong&gt; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Rupesh&lt;/code&gt; and you can ask &lt;strong&gt;&lt;em&gt;doubts/questions&lt;/em&gt;&lt;/strong&gt; and get more help, tips and tricks.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;notice--warning&quot;&gt;Your bright future is awaiting for you so visit today &lt;a href=&quot;www.fullstackmaster.net&quot;&gt;FullstackMaster&lt;/a&gt; and allow me to help you to board on your dream software company as a new &lt;strong&gt;Software Developer, Architect or Lead Engineer&lt;/strong&gt; role.&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
&lt;strong&gt;💖 Say 👋 to me!&lt;/strong&gt;
&lt;br /&gt;Rupesh Tiwari
&lt;br /&gt;Founder of &lt;a href=&quot;https://www.fullstackmaster.net&quot;&gt;Fullstack Master &lt;/a&gt;
&lt;br /&gt;Email: &lt;a href=&quot;mailto:rupesh.tiwari.info@gmail.com?subject=Hi&quot;&gt;rupesh.tiwari.info@gmail.com&lt;/a&gt;
&lt;br /&gt;Website: &lt;a href=&quot;https://www.rupeshtiwari.com&quot;&gt;RupeshTiwari.com &lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://imgur.com/5fBatz9.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</content><author><name>Rupesh Tiwari</name></author><category term="azure" /><category term="webdev" /><category term="beginners" /><category term="tutorial" /><summary type="html">Now a days distributed architecture is common. We deploy our services into many different servers to scale them up and meet our demand. However, managing all servers for load-balancing, scaling, make application highly available is super challenging on cloud. Azure Virtual Machine Scale sets is the great tool which does all of these automatically with no extra cost for you. Lets learn more about Scale sets in this article.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://i.imgur.com/zZYQYQA.png" /><media:content medium="image" url="https://i.imgur.com/zZYQYQA.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>